/*!CK:1231139224!*//*1444747167,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["fkK5O"]); }

__d('FBRTCDispatcher',['Dispatcher'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('FBRTCStore',['FBRTCDispatcher','FluxStore'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,i);k=j&&j.prototype;function l(){k.constructor.call(this,h);}l.prototype.__emitChange=function(){this.__emitter.emit(this.__changeEvent);};f.exports=l;},null);
__d('ChatOptions',['Arbiter','ChannelConstants','ChatSidebarActions','FBRTCCallBlockingStore','JSLogger','PresenceUtil','ChatOptionsInitialData'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=l.create('chat_options'),o={};(function(){var q=c('ChatOptionsInitialData');for(var r in q){var s=q[r];if(r==='call_blocked_until'){k.init(s);}else o[r]=!!s;}})();var p=Object.assign(new h(),{getSetting:function(q){return o[q];},setSetting:function(q,r,s){if(q==='sidebar_mode'){r?j.enable():j.disable();return;}if(this.getSetting(q)==r)return;if(s){s='from_'+s;n.log(s,{name:q,new_value:r,old_value:this.getSetting(q)});}o[q]=!!r;h.inform('chat/option-changed',{name:q,value:r});}});h.subscribe(i.getArbiterType('setting'),function(q,r){var s=r.obj;if(s.window_id===m.getSessionID())return;p.setSetting(s.setting,!!s.value,'channel');});h.subscribe(l.DUMP_EVENT,function(q,r){r.chat_options=o;});f.exports=p;},null);
__d('ChatQuietLinks',['Event','DOM','UserAgent_DEPRECATED','DataStore','Parent'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={},n={silenceLinks:function(r){o(r,this.removeEmptyHrefs.bind(this));},nukeLinks:function(r){o(r,this.removeAllHrefs.bind(this));},removeEmptyHrefs:function(r){p(r,function(s){return !s||s==='#';});},removeAllHrefs:function(r){p(r);}};function o(r,s){var t=!!j.chrome(),u=!!j.chrome()||j.ie()>=9||j.firefox()>=4;if(m[i.getID(r)])return;m[i.getID(r)]=true;if(!u)return;if(!t){s&&s(r);return;}h.listen(r,'mouseover',function v(w){var x=l.byTag(w.getTarget(),'a');if(x){var y=x.getAttribute('href');if(q(y)){k.set(x,'stashedHref',x.getAttribute('href'));x.removeAttribute('href');}}});h.listen(r,'mouseout',function v(w){var x=l.byTag(w.getTarget(),'a'),y=x&&k.remove(x,'stashedHref');if(q(y))x.setAttribute('href',y);});h.listen(r,'mousedown',function(v){if(!v.isDefaultRequested())return true;var w=l.byTag(v.getTarget(),'a'),x=w&&k.get(w,'stashedHref');if(q(x))w.setAttribute('href',x);});}function p(r,s){var t=i.scry(r,'a');if(s)t=t.filter(function(u){return s(u.getAttribute('href'));});t.forEach(function(u){u.removeAttribute('href');u.setAttribute('tabindex',0);});}function q(r){return r&&r!=='#';}f.exports=n;},null);
__d('WebMessengerEvents',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=Object.assign(new h(),{MASTER_DOM_CHANGED:'master-dom-changed',DETAIL_DOM_CHANGED:'detail-dom-changed',FOCUS_COMPOSER:'focus-composer',FOCUS_SEARCH:'focus-search',FOCUS_AND_SELECT_SEARCH:'focus-and-select-search',STICKER_CLICKED:'sticker-clicked',SUBMIT_REPLY:'submit-reply',UPDATE_SELECTION:'update-selection',masterDOMChanged:function(){this.inform(i.MASTER_DOM_CHANGED);},detailDOMChanged:function(){this.inform(i.DETAIL_DOM_CHANGED);},focusComposer:function(){this.inform(i.FOCUS_COMPOSER);},focusSearch:function(){this.inform(i.FOCUS_SEARCH);},focusAndSelectSearch:function(){this.inform(i.FOCUS_AND_SELECT_SEARCH);},updateSelection:function(j){this.inform(i.UPDATE_SELECTION,j);},stickerClicked:function(j,k){this.inform(i.STICKER_CLICKED,{packID:j,stickerID:k});},submitReply:function(){this.inform(i.SUBMIT_REPLY);}});f.exports=i;},null);
__d('WebMessengerSubscriptionsHandler',['SubscriptionsHandler'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=new h('webmessenger');f.exports=i;},null);
__d("isWebMessengerURI",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){return (/^(\/messages)/.test(i.getPath()));}f.exports=h;},null);
__d('WebMessengerWidthControl',['Arbiter','BlueBar','CSS','CSSClassTransition','DOMDimensions','Event','Style','URI','ViewportBounds','WebMessengerEvents','WebMessengerSubscriptionsHandler','$','cx','isWebMessengerURI','requestAnimationFrame','setTimeoutAcrossTransitions','shield','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z=205,aa=981,ba=257,ca=18,da=848,ea=724,fa=.57,ga=56,ha,ia,ja;function ka(pa,qa,ra){this.masterChanged=pa;this.detailChaned=qa;r.addSubscriptions(m.listen(window,'resize',y(x(la,this,this),100)),h.subscribe(['sidebar/initialized','sidebar/show','sidebar/hide','minisidebar/show'],x(la,this,this),h.SUBSCRIBE_NEW));var sa=oa()?ga:0;if(ra)sa=z;this._width=oa()?0:da;ja=true;la(this,sa);}function la(pa,qa){var ra=p.getRight()+p.getLeft();ra=ra||qa||0;var sa=l.getViewportWithoutScrollbarDimensions().width-ra,ta=Math.round(Math.max(0,sa/2-aa/2));sa=aa+ta-ba;sa-=ca;sa=Math.max(ea,Math.min(da,sa));if(!isNaN(sa)&&pa._width!==sa){pa._width=sa;var ua=Math.round(sa/(1+fa)),va=sa-ua;pa.masterChanged(va);pa.detailChaned(ua);if(oa()){var wa=sa+ba;ma(function(){if(ia){document.body.className=ia;ia='';}na(wa+'px');j.removeClass(document.body,"_5uj5");ja&&q.detailDOMChanged();ja=false;},ia);}}}function ma(pa,qa){qa&&j.addClass(document.documentElement,"_5uj6");v(pa);qa&&w(j.removeClass.bind(null,document.documentElement,"_5uj6"),1000);}function na(pa){n.set(i.getNavRoot(),'width',pa);n.set(s('globalContainer'),'width',pa);}function oa(){if(!ha)ha=j.hasClass(document.body,"_6nw");return ha;}k.registerHandler(function(pa,qa,ra,sa){function ta(ua){return oa()&&u(new o(ua));}if(ta(sa)){ia=qa;return true;}else if(ta(ra)){ma(function(){pa.className=qa;na('');},true);return true;}});f.exports=ka;},null);
__d('Dock',['Event','shield','Arbiter','ArbiterMixin','BlueBar','ChatQuietLinks','CSS','DataStore','DOM','Parent','Scroll','Style','Toggler','Vector','csx','emptyFunction','WebMessengerWidthControl'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();c('WebMessengerWidthControl');function x(){}Object.assign(x,k,{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(y){this.init=w;this.rootEl=y;this.calculateViewportDimensions();this.calculateFlyoutHeightOffset();m.removeEmptyHrefs(this.rootEl);h.listen(y,'click',this._onClick.bind(this));h.listen(window,'resize',this._onWindowResize.bind(this));t.subscribe(['show','hide'],(function(z,aa){var ba=aa.getActive();if(!p.contains(y,ba))return;if(n.hasClass(ba,'fbNub')){this.notifyNub(ba,z);if(z==='show')this._resizeNubFlyout(ba);}else{var ca=q.byClass(ba,'fbNubFlyout');if(ca)n.conditionClass(ca,'menuOpened',z==='show');}}).bind(this));this.inform('init',{},j.BEHAVIOR_PERSISTENT);},calculateViewportDimensions:function(){return this.viewportDimensions=u.getViewportDimensions();},calculateFlyoutHeightOffset:function(){this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+u.getElementDimensions(this.rootEl).y;var y=l.getBar();if(y){var z=s.isFixed(y)?'viewport':'document';this.flyoutHeightOffset+=u.getElementPosition(y,z).y+u.getElementDimensions(y).y;}},toggle:function(y){var z=this._findFlyout(y);if(!z)return;this.subscribe('init',function(){t.toggle(y);});},show:function(y){this.subscribe('init',function(){t.show(y);});},showNub:function(y){n.show(y);},hide:function(y){this.subscribe('init',function(){var z=t.getInstance(y);p.contains(y,z.getActive())&&z.hide();});},hideNub:function(y){n.hide(y);this.hide(y);},setUseMaxHeight:function(y,z){n.conditionClass(y,'maxHeight',z!==false);this._resizeNubFlyout(y);},_resizeNubFlyout:function(y){var z=this._findFlyout(y);if(!z||n.hasClass(y,'placeholder')||!(n.hasClass(y,'openToggler')||n.hasClass(y,'opened')))return;var aa=p.find(z,'div.fbNubFlyoutOuter'),ba=p.find(aa,'div.fbNubFlyoutInner'),ca=p.find(ba,'div.fbNubFlyoutBody'),da=r.getTop(ca),ea=ca.offsetHeight;s.set(ca,'height','auto');var fa=u.getElementDimensions(z),ga=u.getElementDimensions(ca),ha=this.getMaxFlyoutHeight(y);s.set(z,'max-height',ha+'px');s.set(aa,'max-height',ha+'px');fa=u.getElementDimensions(z);var ia=u.getElementDimensions(ba),ja=ia.y-ga.y,ka=fa.y-ja,la=parseInt(ca.style.height||ca.clientHeight,10),ma=ka!==la;if(fa.y>ja&&ma)s.set(ca,'height',ka+'px');n.removeClass(z,'swapDirection');var na=u.getElementPosition(z).x;n.conditionClass(z,'swapDirection',(function(){if(na<0)return true;return na+fa.x>this.viewportDimensions.x;}).bind(this)());if(ma&&da+ea>=ga.y){r.setTop(ca,ca.scrollHeight);}else r.setTop(ca,da);this.notifyNub(y,'resize');},getMaxFlyoutHeight:function(y){var z=this._findFlyout(y),aa=u.getElementPosition(z,'viewport'),ba=u.getElementDimensions(z),ca=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.flyoutHeightOffset)-(this.viewportDimensions.y-aa.y-ba.y);return Math.max(ca,0);},resizeAllFlyouts:function(){var y=this._getAllNubs(),z=y.length;while(z--)this._resizeNubFlyout(y[z]);},hideAllFlyouts:function(){var y=this._getAllNubs(),z=y.length;while(z--)this.hide(y[z]);},_getAllNubs:function(){var y=p.scry(this.rootEl,"div._50-v.openToggler");return y.concat(p.scry(this.rootEl,"div._50-v.opened"));},_onClick:function(event){var y=event.getTarget(),z=q.byClass(y,'fbNub');if(z){if(q.byClass(y,'fbNubFlyoutTitlebar')){var aa=q.byTag(y,'a'),ba=y.nodeName=='INPUT'&&y.getAttribute('type')=='submit';if(!aa&&!ba){this.hide(z);return false;}}this.notifyNub(z,'click');}},_onWindowResize:function(event){this.calculateViewportDimensions();this.resizeAllFlyouts();},_findFlyout:function(y){return n.hasClass(y,'fbNubFlyout')?y:p.scry(y,'div.fbNubFlyout')[0]||null;},registerNubController:function(y,z){o.set(y,'dock:nub:controller',z);z.subscribe('nub/button/content-changed',i(this.inform,this,'resize',y));z.subscribe('nub/flyout/content-changed',i(this._resizeNubFlyout,this,y));},unregisterNubController:function(y){o.remove(y,'dock:nub:controller');},notifyNub:function(y,z,aa){var ba=o.get(y,'dock:nub:controller');ba&&ba.inform(z,aa);}});f.exports=b.Dock||x;},null);
__d('PureStoreBasedStateMixin',['StoreBasedStateMixinHelper','invariant','setImmediate'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=(function(){for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];return {getInitialState:function(){return this.constructor.calculateState();},componentWillMount:function(){!this.constructor.calculateState?i(0):undefined;this._recalculateStateID=null;var o=(function(){if(this.isMounted())this.setState(this.constructor.calculateState());this._recalculateStateID=null;}).bind(this);this._mixin=new h(m);this._mixin.subscribeCallback((function(){if(this._recalculateStateID===null)this._recalculateStateID=j(o);}).bind(this));},componentWillUnmount:function(){this._mixin.release();this._mixin=null;}};}).bind(this);f.exports=k;},null);
__d('keyMirrorRecursive',['invariant'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(l,m){return j(l,m);}function j(l,m){var n={},o;!k(l)?h(0):undefined;for(o in l){if(!l.hasOwnProperty(o))continue;var p=l[o],q=m?m+'.'+o:o;if(k(p)){p=j(p,q);}else p=q;n[o]=p;}return n;}function k(l){return l instanceof Object&&!Array.isArray(l);}f.exports=i;},null);
__d('mergeDeepInto',['invariant','mergeHelpers'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=i.ArrayStrategies,k=i.checkArrayStrategy,l=i.checkMergeArrayArgs,m=i.checkMergeLevel,n=i.checkMergeObjectArgs,o=i.isTerminal,p=i.normalizeMergeArg,q=function(u,v,w,x){n(u,v);m(x);var y=v?Object.keys(v):[];for(var z=0;z<y.length;z++){var aa=y[z];s(u,v,aa,w,x);}},r=function(u,v,w,x){l(u,v);m(x);var y=Math.max(u.length,v.length);for(var z=0;z<y;z++)s(u,v,z,w,x);},s=function(u,v,w,x,y){var z=v[w],aa=v.hasOwnProperty(w),ba=aa&&o(z),ca=aa&&Array.isArray(z),da=aa&&!ca&&!ca,ea=u[w],fa=u.hasOwnProperty(w),ga=fa&&o(ea),ha=fa&&Array.isArray(ea),ia=fa&&!ha&&!ha;if(ga){if(ba){u[w]=z;}else if(ca){u[w]=[];r(u[w],z,x,y+1);}else if(da){u[w]={};q(u[w],z,x,y+1);}else if(!aa)u[w]=ea;}else if(ha){if(ba){u[w]=z;}else if(ca){!j[x]?h(0):undefined;if(x===j.Clobber)ea.length=0;r(ea,z,x,y+1);}else if(da){u[w]={};q(u[w],z,x,y+1);}else !aa;}else if(ia){if(ba){u[w]=z;}else if(ca){u[w]=[];r(u[w],z,x,y+1);}else if(da){q(ea,z,x,y+1);}else !aa;}else if(!fa)if(ba){u[w]=z;}else if(ca){u[w]=[];r(u[w],z,x,y+1);}else if(da){u[w]={};q(u[w],z,x,y+1);}else !aa;},t=function(u,v,w){var x=p(v);k(w);q(u,x,w,0);};f.exports=t;},null);
__d('mergeDeep',['mergeHelpers','mergeDeepInto'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=h.checkArrayStrategy,k=h.checkMergeObjectArgs,l=h.normalizeMergeArg,m=function(n,o,p){var q=l(n),r=l(o);k(q,r);j(p);var s={};i(s,q,p);i(s,r,p);return s;};f.exports=m;},null);
__d('ReactComponentRenderer',['React','ReactDOM','Object.assign','warning'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();function l(m,n){this.klass=m;this.container=n;this.props={};this.component=null;}l.prototype.replaceProps=function(m,n){this.props={};this.setProps(m,n);};l.prototype.setProps=function(m,n){if(this.klass==null)return;j(this.props,m);var o=h.createElement(this.klass,this.props);this.component=i.render(o,this.container,n);};l.prototype.unmount=function(){i.unmountComponentAtNode(this.container);this.klass=null;};f.exports=l;},null);
__d('DropdownContextualHelpLink',['DOM','ge'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={set:function(k){var l=i('navHelpCenter');if(l!==null)h.replace(l,k);}};f.exports=j;},null);
__d('FBRTCAvailability',['ChannelConstants','PresenceStatus'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={isCallable:function(k){var l=i.getCapabilities(k),m=h.CAPABILITY_VOIP_INTEROP|h.CAPABILITY_VIDEO;return !!(l&m);}};f.exports=j;},null);
__d('FBRTCStruct',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=function(j,k,l){var m,n;if(typeof j=='string'||j instanceof String){n=j;m=j;}else for(var o in j)if(j.hasOwnProperty(o))if(o==='index'){l=j[o];}else{n=o;m=j[o];}k[n]=l;k.strNames[l]=m;};function i(j){'use strict';this.strNames=[];for(var k=0;k<j.length;k++)h(j[k],this,k);}f.exports=i;},null);
__d('FBRTCConstants',['FBRTCStruct','keyMirror'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={OFFER:'offer',ANSWER:'answer',ICE_CANDIDATE:'ice_candidate',OK:'ok',PING:'ping',HANGUP:'hang_up',OTHER_DISMISS:'other_dismiss',MSG_ACK:'msg_ack',PRANSWER:'pranswer',ICERESTART_OFFER:'icerestart_offer',ICERESTART_ANSWER:'icerestart_answer',PCRESTART_OFFER:'pcrestart_offer',PCRESTART_ANSWER:'pcrestart_answer',SDP_UPDATE:'sdp_update',OFFER_ACK:'offer_ack',OFFER_NACK:'offer_nack',ANSWER_ACK:'answer_ack',SET_VIDEO:'set_video',VIDEO_REQUEST:'video_request',ACK:'ack'},k={AUDIO_ONLY:'audio_only',AUDIO_VIDEO:'audio_video',SCREEN_CONTENT:'screen'},l=i({NO_VIDEO:null,LQ_VIDEO:null,SD_VIDEO:null,HD_VIDEO:null}),m=new h([{IGNORE_CALL:'IgnoreCall'},{HANGUP_CALL:'HangupCall'},{IN_ANOTHER_CALL:'InAnotherCall'},{ACCEPT_AFTER_HANGUP:'CallEndAcceptAfterHangUp'},{NO_ANSWER_TIMEOUT:'NoAnswerTimeout'},{INCOMING_TIMEOUT:'IncomingTimeout'},{OTHER_INSTANCE_HANDLED:'OtherInstanceHandled'},{SIGNALING_MESSAGE_FAILED:'SignalingMessageFailed'},{CONNECTION_DROPPED:'ConnectionDropped'},{CLIENT_INTERRUPTED:'ClientInterrupted'},{WEBRTC_ERROR:'WebRTCError'},{CLIENT_ERROR:'ClientError'},{NO_PERMISSION:'NoPermission'},{OTHER_NOT_CAPABLE:'OtherNotCapable'},{NO_UI_ERROR:'NoUIShown'},{UNSUPPORTED_VERSION:'VersionUnsupported'},{CALLER_NOT_VISIBLE:'CallerNotVisible'},{CARRIER_BLOCKED:'CarrierBlocked'},{OTHER_CARRIER_BLOCKED:'OtherCarrierBlocked'}]),n={TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10},o={ONE_HOUR:'1hour',UNTIL_EIGHT_AM:'8am',ALWAYS:'always'},p=i({VIDEO:null,AUDIO:null,SCREEN_SHARE:null}),q={PayloadType:j,StreamType:k,VideoQuality:l,CallEndReason:m,UIEventType:n,CallBlockingConstants:o,IncomingCallDialogTypes:p,endCallReasonFromString:function(r){return m.strNames.indexOf(r);},callEndReasonString:function(r){if(r<0||r>m.strNames.length)return 'Unknown';return m.strNames[r];},fullCallEndReasonString:function(r,s){return this.callEndReasonString(r)+'_'+(s?'remote':'local');}};f.exports=q;},null);
__d('FBRTCIceStatsParser',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null;i.getInstance=function(){'use strict';if(!h)h=new i();return h;};function i(){'use strict';}i.prototype.extractIceInfo=function(j){'use strict';var k=[],l=j.split("\r\n");for(var m=0;m<l.length;m++){var n=l[m];if(this.$FBRTCIceStatsParser1(n))k.push({gen:this.$FBRTCIceStatsParser2(n),type:this.$FBRTCIceStatsParser3(n)});}return k;};i.prototype.$FBRTCIceStatsParser1=function(j){'use strict';return j.indexOf('candidate:')>-1;};i.prototype.$FBRTCIceStatsParser2=function(j){'use strict';var k=0,l=j.match(/generation (\d+)/);if(l)k=parseInt(l[1],10);return k;};i.prototype.$FBRTCIceStatsParser3=function(j){'use strict';var k=j.match(/typ (host|relay|srflx|prflx)/);if(k){return k[1];}else return 'unknown';};f.exports=i;},null);
__d('FBRTCLogger',['Log','LogHistory','MarauderLogger','formatDate','pageID'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m='webrtc',n='sent_message',o='received_message',p='send_succeeded',q='send_failed',r='info',s='call_action',t='client_event',u='client_error',v='type',w='msg_id',x='ack_msg_id',y='call_id',z='from',aa='to',ba='content',ca='tag',da='peer_id',ea='error_code',fa='trigger',ga='endcallstats',ha=null;ia.getInstance=function(){'use strict';if(!ha)ha=new ia();return ha;};function ia(){'use strict';this.$FBRTCLogger1=i.getInstance(m);}ia.prototype.logToConsole=function(ja){'use strict';var ka='Console';this.$FBRTCLogger2(null,null,ka,ja);this.$FBRTCLogger1.log(ka,ja);};ia.prototype.logReceivedMessage=function(ja,ka,la){'use strict';var ma={};ma[z]=ja;ma[y]=ka;ma[v]=la.type;ma[w]=la.msg_id;if(la.sdp)ma[ba]=la.sdp;if(la.ack_id)ma[x]=la.ack_id;this.$FBRTCLogger3(o,ma);this.$FBRTCLogger2(ja,ka,'Received',la.type+', '+la.msg_id);};ia.prototype.logSentMessage=function(ja,ka,la){'use strict';var ma={};ma[aa]=ja;ma[y]=ka;ma[v]=la.type;ma[w]=la.msg_id;if(la.sdp)ma[ba]=la.sdp;if(la.ack_id)ma[x]=la.ack_id;this.$FBRTCLogger3(n,ma);this.$FBRTCLogger2(ja,ka,'Sent',la.type+', '+la.msg_id);};ia.prototype.logSentMessageSuccess=function(ja,ka,la,ma){'use strict';var na={};na[da]=ja;na[y]=ka;na[v]=la;na[w]=ma;this.$FBRTCLogger3(p,na);};ia.prototype.logSentMessageFailure=function(ja,ka,la,ma,na){'use strict';var oa={};oa[da]=ja;oa[y]=ka;oa[v]=la;oa[w]=ma;oa[ea]=na;this.$FBRTCLogger3(q,oa);this.$FBRTCLogger2(ja,ka,'Send Failed',la+', '+na);};ia.prototype.logCallAction=function(ja,ka,la,ma,na){'use strict';var oa={};oa[da]=ja;oa[y]=ka;oa[s]=la;oa[ba]=ma;if(na)oa[fa]=na;this.$FBRTCLogger3(s,oa);this.$FBRTCLogger2(ja,ka,'CallAction',la+', '+ma);};ia.prototype.logEvent=function(ja,ka,event){'use strict';var la={};la[da]=ja;la[y]=ka;la[ba]=event;this.$FBRTCLogger3(t,la);this.$FBRTCLogger2(ja,ka,'Event',event);};ia.prototype.logInfo=function(ja,ka,la){'use strict';var ma={};ma[da]=ja;ma[y]=ka;ma[ba]=la;this.$FBRTCLogger3(r,ma);this.$FBRTCLogger2(ja,ka,'Info',la);};ia.prototype.logError=function(ja,ka,la){'use strict';var ma={};ma[da]=ja;ma[y]=ka;ma[ba]=la;this.$FBRTCLogger3(u,ma);this.$FBRTCLogger2(ja,ka,'Error',la);};ia.prototype.logErrorWithoutID=function(ja){'use strict';this.logError(null,null,ja);};ia.prototype.logEndCallSummary=function(ja){'use strict';if(!ja)return;var ka={};ka[da]=ja.peerID;ka[y]=ja.callID;ka[ca]=ga;ka[ba]=ja.toString();var la=ja.getExtraInfo();for(var ma in la)if(la.hasOwnProperty(ma))ka[ma]=la[ma];this.$FBRTCLogger3(r,ka);this.$FBRTCLogger2(ja.peerID,ja.callID,'Call Summary',ka);};ia.prototype.$FBRTCLogger3=function(ja,ka){'use strict';ka.page_id=l;this.$FBRTCLogger1.log(ja,ka);j.log(ja,m,ka);};ia.prototype.$FBRTCLogger2=function(ja,ka,la,ma){'use strict';};ia.CallAction={START_CALL:'start_call',RECEIVED_CALL:'received_call',ANSWER_CALL:'answer_call',END_CALL:'end_call',DENIED_PERMISSION:'denied_permission',SET_MUTE:'set_mute',SET_VIDEO_ON:'set_video_on',SET_SELF_VIEW_ON:'set_self_view_on',SET_FULLSCREEN_ON:'set_fullscreen_on',START_SKYPE:'start_skype',TRY_NEW:'try_new',OPEN_POPUP:'open_popup',POPUP_OPENED:'popup_opened',AUTO_DISABLE_VIDEO:'auto_disable_video',FAILED_GETTING_URI:'failed_getting_uri',OLD_URI:'old_uri',USER_SETTINGS_CHANGED:'user_settings_changed'};ia.Trigger={ADMIN_MESSAGE:'admin_message',CHAT_TAB_ICON:'chat_tab_icon',CHAT_TAB_ICON_TOUR:'chat_tab_icon_tour',CHAT_TAB_VOICE_ICON:'chat_tab_voice_icon',SKYPE_DEPRECATION_DIALOG:'skype_deprecation_dialog',REDIAL_BUTTON:'redial_button',RETURN_CALL:'return_call',WEB_MESSENGER:'web_messenger',POPUP_CALL_START_BUTTON:'popup_start_call_button',TIMELINE_PROFILE:'timeline_profile',UNKNOWN:'unknown',RESET_CALL:'install_screen_sharing_ext_dialog'};ia.Key={DEVICE_INFO:'device_info',RATING:'rating5',RATING_SHOWN:'rating_shown',SURVEY_CHOICE:'survey_choice',SURVEY_DETAILS:'survey_details',SURVEY_SHOWN:'survey_shown',INITIATED_BY_PAGE_ID:'initiated_by_page_id',PEER_IS_MOBILE:'peer_is_mobile'};f.exports=ia;},null);
__d('FBRTCCallSummary',['FBRTCConstants','FBRTCIceStatsParser','FBRTCLogger','UserAgentData','performanceNow'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=5*60*1000,n={CALL_STARTED:'started',POPUP_OPENED:'opened',SENT_OFFER:'s_o',RECV_OFFER:'r_o',SENT_OFFER_ACK:'s_oack',RECV_OFFER_ACK:'r_oack',SENT_RETRIED_OFFER:'s_o2',RECV_RETRIED_OFFER:'r_o2',SENT_RETRIED_OFFER_ACK:'s_oack2',RECV_RETRIED_OFFER_ACK:'r_oack2',SENT_PRANSWER:'s_pr',RECV_PRANSWER:'r_pr',NETWORK_READY:'network_ready',SENT_ANSWER:'s_a',RECV_ANSWER:'r_a',SENT_ANSWER_ACK:'s_aack',RECV_ANSWER_ACK:'r_aack',SENT_RETRIED_ANSWER:'s_a2',RECV_RETRIED_ANSWER:'r_a2',SENT_RETRIED_ANSWER_ACK:'s_aack2',RECV_RETRIED_ANSWER_ACK:'r_aack2',SENT_OK:'s_ok',RECV_OK:'r_ok',CALL_CONNECTED:'connected',CALL_ENDED:'ended'};o.CURRENT_SUMMARY_VERSION=19;function o(p){'use strict';this.peerID=p.peerID;this.callID=p.callID;this.$FBRTCCallSummary1=p.isCaller;this.$FBRTCCallSummary2=new Date().valueOf();this.$FBRTCCallSummary3=null;this.$FBRTCCallSummary4={};this.$FBRTCCallSummary5=null;this.$FBRTCCallSummary6=null;this.$FBRTCCallSummary7=null;this.$FBRTCCallSummary8=null;this.$FBRTCCallSummary9=null;this.$FBRTCCallSummary10=null;this.$FBRTCCallSummary11={};this.$FBRTCCallSummary12={};this.$FBRTCCallSummary13={};this.$FBRTCCallSummary14={};this.$FBRTCCallSummary15={};this.$FBRTCCallSummary16={};this.$FBRTCCallSummary17=l();this.$FBRTCCallSummary18=0;this.$FBRTCCallSummary19={};this.$FBRTCCallSummary20=this.$FBRTCCallSummary17;this.$FBRTCCallSummary21=0;this.$FBRTCCallSummary22={};this.addExtraInfo(j.Key.DEVICE_INFO,this.$FBRTCCallSummary23());this.$FBRTCCallSummary24();this.$FBRTCCallSummary25=i.getInstance();this.$FBRTCCallSummary26=j.getInstance();}o.prototype.toJsonString=function(){'use strict';this.$FBRTCCallSummary9=new Date().valueOf();return JSON.stringify({version:o.CURRENT_SUMMARY_VERSION,peerID:this.peerID,callID:this.callID,isCaller:this.$FBRTCCallSummary1,callType:this.$FBRTCCallSummary27,localVideoDuration:this.$FBRTCCallSummary28,remoteVideoDuration:this.$FBRTCCallSummary29,startTime:this.$FBRTCCallSummary2,trigger:this.$FBRTCCallSummary3,signalingTime:this.$FBRTCCallSummary4,endCallReason:this.$FBRTCCallSummary5,endCallSubreason:this.$FBRTCCallSummary6,isRemoteEnded:this.$FBRTCCallSummary7,lastUpdatedTime:this.$FBRTCCallSummary8,lastSerializedTime:this.$FBRTCCallSummary9,unsetOnRetrieve:this.$FBRTCCallSummary10,openCount:this.$FBRTCCallSummary21,extraInfo:this.$FBRTCCallSummary22,pcStats:this.$FBRTCCallSummary11,captureStats:this.$FBRTCCallSummary12,gen0IceSentCount:this.$FBRTCCallSummary13,gen0IceReceivedCount:this.$FBRTCCallSummary14,iceSentCount:this.$FBRTCCallSummary15,iceReceivedCount:this.$FBRTCCallSummary16,newSignalingTime:this.$FBRTCCallSummary19,accumulatedCallTime:this.$FBRTCCallSummary30()});};o.fromJsonString=function(p){'use strict';var q;try{q=JSON.parse(p);}catch(r){return null;}if(q.version!==o.CURRENT_SUMMARY_VERSION)return null;if(!q.hasOwnProperty('peerID')||!q.hasOwnProperty('callID')||!q.hasOwnProperty('isCaller')||!q.hasOwnProperty('startTime')||!q.hasOwnProperty('trigger')||!q.hasOwnProperty('signalingTime')||!q.hasOwnProperty('endCallReason')||!q.hasOwnProperty('isRemoteEnded')||!q.hasOwnProperty('lastUpdatedTime')||!q.hasOwnProperty('lastSerializedTime'))return null;var s=new o({peerID:q.peerID,callID:q.callID,isCaller:q.isCaller});s.$FBRTCCallSummary2=q.startTime;s.$FBRTCCallSummary3=q.trigger;s.$FBRTCCallSummary4=q.signalingTime;s.$FBRTCCallSummary5=q.endCallReason;s.$FBRTCCallSummary6=q.endCallSubreason;s.$FBRTCCallSummary7=q.isRemoteEnded;s.$FBRTCCallSummary8=q.lastUpdatedTime;s.$FBRTCCallSummary9=q.lastSerializedTime;if(q.callType)s.$FBRTCCallSummary27=q.callType;if(q.localVideoDuration)s.$FBRTCCallSummary28=q.localVideoDuration;if(q.remoteVideoDuration)s.$FBRTCCallSummary29=q.remoteVideoDuration;if(q.unsetOnRetrieve)s.$FBRTCCallSummary10=q.unsetOnRetrieve;if(q.openCount)s.$FBRTCCallSummary21=q.openCount;if(q.extraInfo)s.$FBRTCCallSummary22=q.extraInfo;if(q.pcStats)s.$FBRTCCallSummary11=q.pcStats;if(q.captureStats)s.$FBRTCCallSummary12=q.captureStats;if(q.gen0IceSentCount)s.$FBRTCCallSummary13=q.gen0IceSentCount;if(q.gen0IceReceivedCount)s.$FBRTCCallSummary14=q.gen0IceReceivedCount;if(q.iceSentCount)s.$FBRTCCallSummary15=q.iceSentCount;if(q.iceReceivedCount)s.$FBRTCCallSummary16=q.iceReceivedCount;if(q.newSignalingTime)s.$FBRTCCallSummary19=q.newSignalingTime;if(q.accumulatedCallTime)s.$FBRTCCallSummary18=q.accumulatedCallTime;return s;};o.restoreOrInitialize=function(p,q,r,s,t){'use strict';var u=p.retrieveCallSummary(q,r);if(!u){u=new o({peerID:q,callID:r,isCaller:s});if(t){u.onFullMessageReceived({msg:t});u.onOfferAckSent(t);}else u.onCallStarted(j.Trigger.UNKNOWN);j.getInstance().logError(q,r,'Missing call summary from storage');}else if(u.$FBRTCCallSummary10){u.$FBRTCCallSummary5=null;u.$FBRTCCallSummary6=null;u.$FBRTCCallSummary7=null;delete u.$FBRTCCallSummary4[n.CALL_ENDED];delete u.$FBRTCCallSummary19[n.CALL_ENDED];u.$FBRTCCallSummary10=null;}return u;};o.logSavedSummaries=function(p){'use strict';var q=p.getLoggableSummaries(),r=q.length;if(r<=0)return;var s=j.getInstance(),t=[];for(var u=0;u<r;u++){var v=q[u];s.logEndCallSummary(v);t.push({peerID:v.peerID,callID:v.callID});}p.removeCallSummaries(t);s.logToConsole('Logged pending summaries: '+r);};o.prototype.save=function(p){'use strict';var q=l(),r=q-this.$FBRTCCallSummary20;if(r>m){this.$FBRTCCallSummary26.logInfo(this.peerID,this.callID,'Summary too old: '+r);return;}p.storeCallSummary(this.peerID,this.callID,this);this.$FBRTCCallSummary20=q;};o.prototype.getLastUpdatedTime=function(){'use strict';return this.$FBRTCCallSummary8;};o.prototype.setLastUpdatedTime=function(p){'use strict';this.$FBRTCCallSummary8=p;};o.prototype.getExtraInfo=function(){'use strict';return this.$FBRTCCallSummary22;};o.prototype.addExtraInfo=function(p,q){'use strict';this.$FBRTCCallSummary22[p]=q;this.$FBRTCCallSummary24();};o.prototype.onCallStarted=function(p){'use strict';this.$FBRTCCallSummary3=p;this.$FBRTCCallSummary31(n.CALL_STARTED);this.$FBRTCCallSummary24();};o.prototype.onPopupOpened=function(){'use strict';this.$FBRTCCallSummary31(n.POPUP_OPENED);this.$FBRTCCallSummary21++;this.$FBRTCCallSummary24();};o.prototype.setPcStats=function(p){'use strict';this.$FBRTCCallSummary11=p;this.$FBRTCCallSummary24();};o.prototype.setVideoCaptureStats=function(p,q){'use strict';this.$FBRTCCallSummary12={w:p,h:q};this.$FBRTCCallSummary24();};o.prototype.setCallType=function(p){'use strict';this.$FBRTCCallSummary27=p;this.$FBRTCCallSummary24();};o.prototype.setVideoDurations=function(p,q){'use strict';this.$FBRTCCallSummary28=p;this.$FBRTCCallSummary29=q;this.$FBRTCCallSummary24();};o.prototype.onOfferAckSent=function(p){'use strict';this.onMessageSent({type:h.PayloadType.OFFER_ACK,flag:p.flag});};o.prototype.onMessageSent=function(p){'use strict';var q=p.flag===1;switch(p.type){case h.PayloadType.OFFER:this.$FBRTCCallSummary32(q,n.SENT_OFFER,n.SENT_RETRIED_OFFER);this.$FBRTCCallSummary33(p,this.$FBRTCCallSummary13,this.$FBRTCCallSummary15);break;case h.PayloadType.ANSWER:this.$FBRTCCallSummary32(q,n.SENT_ANSWER,n.SENT_RETRIED_ANSWER);this.$FBRTCCallSummary33(p,this.$FBRTCCallSummary13,this.$FBRTCCallSummary15);break;case h.PayloadType.OK:this.$FBRTCCallSummary31(n.SENT_OK);break;case h.PayloadType.PRANSWER:this.$FBRTCCallSummary31(n.SENT_PRANSWER);break;case h.PayloadType.OFFER_ACK:this.$FBRTCCallSummary32(q,n.SENT_OFFER_ACK,n.SENT_RETRIED_OFFER_ACK);break;case h.PayloadType.ANSWER_ACK:this.$FBRTCCallSummary32(q,n.SENT_ANSWER_ACK,n.SENT_RETRIED_ANSWER_ACK);break;case h.PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary33(p,this.$FBRTCCallSummary13,this.$FBRTCCallSummary15);break;default:}this.$FBRTCCallSummary24();};o.prototype.$FBRTCCallSummary33=function(p,q,r){'use strict';var s=null,t=null,u=this.$FBRTCCallSummary25.extractIceInfo(p.sdp);for(var v=0;v<u.length;v++){s=u[v].gen;t=u[v].type;if(s===0)this.$FBRTCCallSummary34(q,t);this.$FBRTCCallSummary34(r,t);}};o.prototype.$FBRTCCallSummary34=function(p,q){'use strict';if(!p[q]){p[q]=1;}else p[q]=p[q]+1;};o.prototype.$FBRTCCallSummary35=function(p){'use strict';if(p.isFromMobile())this.addExtraInfo(j.Key.PEER_IS_MOBILE,'1');};o.prototype.onFullMessageReceived=function(p){'use strict';var q=p.msg,r=q.flag===1;switch(q.type){case h.PayloadType.OFFER:this.$FBRTCCallSummary35(p);this.$FBRTCCallSummary32(r,n.RECV_OFFER,n.RECV_RETRIED_OFFER);this.$FBRTCCallSummary33(q,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;case h.PayloadType.ANSWER:this.$FBRTCCallSummary35(p);this.$FBRTCCallSummary32(r,n.RECV_ANSWER,n.RECV_RETRIED_ANSWER);this.$FBRTCCallSummary33(q,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;case h.PayloadType.OK:this.$FBRTCCallSummary31(n.RECV_OK);break;case h.PayloadType.PRANSWER:this.$FBRTCCallSummary31(n.RECV_PRANSWER);break;case h.PayloadType.OFFER_ACK:this.$FBRTCCallSummary32(r,n.RECV_OFFER_ACK,n.RECV_RETRIED_OFFER_ACK);break;case h.PayloadType.ANSWER_ACK:this.$FBRTCCallSummary32(r,n.RECV_ANSWER_ACK,n.RECV_RETRIED_ANSWER_ACK);break;case h.PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary33(q,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;default:}this.$FBRTCCallSummary24();};o.prototype.onMsgAckReceived=function(p,q){'use strict';var r=p.msg.flag===1;if(q){this.$FBRTCCallSummary32(r,n.RECV_OFFER_ACK,n.RECV_RETRIED_OFFER_ACK);}else this.$FBRTCCallSummary32(r,n.RECV_ANSWER_ACK,n.RECV_RETRIED_ANSWER_ACK);};o.prototype.onCallConnected=function(){'use strict';this.$FBRTCCallSummary31(n.NETWORK_READY);this.$FBRTCCallSummary31(n.CALL_CONNECTED);this.$FBRTCCallSummary24();};o.prototype.onCallEnded=function(p,q,r,s){'use strict';this.$FBRTCCallSummary10=r;this.$FBRTCCallSummary5=p;this.$FBRTCCallSummary6=s;this.$FBRTCCallSummary7=q;this.$FBRTCCallSummary31(n.CALL_ENDED);this.$FBRTCCallSummary24();};o.prototype.toString=function(){'use strict';var p={};p.core_metrics=this.$FBRTCCallSummary36();p.time_series=null;return JSON.stringify(p);};o.prototype.$FBRTCCallSummary36=function(){'use strict';var p={};p.ver=o.CURRENT_SUMMARY_VERSION;p.caller=this.$FBRTCCallSummary1;p.call_type=this.$FBRTCCallSummary27;p.conn=this.$FBRTCCallSummary37();p.peer_id=this.peerID;p.has_video=true;p.open_count=this.$FBRTCCallSummary21;p.signaling=this.$FBRTCCallSummary38();p.sender=this.$FBRTCCallSummary39();p.receiver=this.$FBRTCCallSummary40();p.end=this.$FBRTCCallSummary41();p.video=this.$FBRTCCallSummary42();return p;};o.prototype.$FBRTCCallSummary37=function(){'use strict';var p={dtls:1};if(this.$FBRTCCallSummary11.sender&&this.$FBRTCCallSummary11.sender.rtt)p.rtt=this.$FBRTCCallSummary11.sender.rtt;return p;};o.prototype.$FBRTCCallSummary38=function(){'use strict';var p={};if(this.$FBRTCCallSummary3)p.trigger=this.$FBRTCCallSummary3;p.start_time=this.$FBRTCCallSummary2;p.time_from_start=this.$FBRTCCallSummary4;var q=this.$FBRTCCallSummary4[n.CALL_CONNECTED],r=this.$FBRTCCallSummary4[n.CALL_ENDED];if(q){if(!r)if(this.$FBRTCCallSummary9){r=this.$FBRTCCallSummary9-this.$FBRTCCallSummary2;}else r=this.$FBRTCCallSummary43();var s=r-q;if(s>0)p.duration=s;}p.new_time_from_start=this.$FBRTCCallSummary19;q=this.$FBRTCCallSummary19[n.CALL_CONNECTED];r=this.$FBRTCCallSummary19[n.CALL_ENDED];if(q){if(!r)if(this.$FBRTCCallSummary18>0){r=this.$FBRTCCallSummary18;}else r=this.$FBRTCCallSummary30();s=r-q;if(s>0)p.new_duration=s;}return p;};o.prototype.$FBRTCCallSummary39=function(){'use strict';var p={};if(this.$FBRTCCallSummary13)p.ice_g0=this.$FBRTCCallSummary13;if(this.$FBRTCCallSummary15)p.ice=this.$FBRTCCallSummary15;if(this.$FBRTCCallSummary11.sender)Object.assign(p,this.$FBRTCCallSummary11.sender);return p;};o.prototype.$FBRTCCallSummary40=function(){'use strict';var p={};if(this.$FBRTCCallSummary14)p.ice_g0=this.$FBRTCCallSummary14;if(this.$FBRTCCallSummary16)p.ice=this.$FBRTCCallSummary16;return p;};o.prototype.$FBRTCCallSummary41=function(){'use strict';var p={};if(this.$FBRTCCallSummary5!==null){p.end_call_reason_string=h.callEndReasonString(this.$FBRTCCallSummary5);if(this.$FBRTCCallSummary6!==null)p.end_call_subreason_string=this.$FBRTCCallSummary6;p.remote_ended=this.$FBRTCCallSummary7;}if(this.$FBRTCCallSummary11.end)Object.assign(p,this.$FBRTCCallSummary11.end);return p;};o.prototype.$FBRTCCallSummary42=function(){'use strict';var p={capture:{}};if(this.$FBRTCCallSummary11.video&&this.$FBRTCCallSummary11.video.sender)Object.assign(p,this.$FBRTCCallSummary11.video.sender);if(this.$FBRTCCallSummary12)Object.assign(p.capture,this.$FBRTCCallSummary12);return {sender:p,ld:this.$FBRTCCallSummary28,rd:this.$FBRTCCallSummary29};};o.prototype.$FBRTCCallSummary43=function(){'use strict';return new Date().valueOf()-this.$FBRTCCallSummary2;};o.prototype.$FBRTCCallSummary30=function(){'use strict';var p=l()-this.$FBRTCCallSummary17;return Math.floor(this.$FBRTCCallSummary18+p);};o.prototype.$FBRTCCallSummary31=function(p){'use strict';if(this.$FBRTCCallSummary4[p])return;this.$FBRTCCallSummary4[p]=this.$FBRTCCallSummary43();this.$FBRTCCallSummary19[p]=this.$FBRTCCallSummary30();};o.prototype.$FBRTCCallSummary32=function(p,q,r){'use strict';if(p){this.$FBRTCCallSummary31(r);}else this.$FBRTCCallSummary31(q);};o.prototype.$FBRTCCallSummary24=function(){'use strict';this.$FBRTCCallSummary8=new Date().valueOf();};o.prototype.$FBRTCCallSummary23=function(){'use strict';return {device:k.deviceName,os:k.platformName,os_version:k.platformFullVersion,browser:k.browserName,browser_version:k.browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth};};f.exports=o;},null);
__d('FBRTCCallSummaryStore',['CacheStorage','FBRTCCallSummary','FBRTCLogger','areEqual'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='localstorage',m='RTC_CALL_SUMMARY_',n='summary',o=2000,p=3,q=3*60*1000,r=null;s.getInstance=function(){'use strict';if(!r)r=new s();return r;};function s(){'use strict';this.$FBRTCCallSummaryStore1=new h(l,m);this.$FBRTCCallSummaryStore2=j.getInstance();}s.prototype.storeCallSummary=function(t,u,v){'use strict';var w=this;this.$FBRTCCallSummaryStore3(function(x){if(!x[t])x[t]={};var y=x[t][u];if(y){var z=w.$FBRTCCallSummaryStore4(y);if(z&&z.getLastUpdatedTime()>v.getLastUpdatedTime()){w.$FBRTCCallSummaryStore2.logToConsole('Outdated summaries');return null;}}x[t][u]=w.$FBRTCCallSummaryStore5(v);return x;},w.$FBRTCCallSummaryStore2.logError.bind(w.$FBRTCCallSummaryStore2,t,u));};s.prototype.retrieveCallSummary=function(t,u){'use strict';var v=this.$FBRTCCallSummaryStore6(),w=null;if(v[t])w=v[t][u];if(w){return this.$FBRTCCallSummaryStore4(w);}else return null;};s.prototype.removeCallSummary=function(t,u){'use strict';this.removeCallSummaries([{peerID:t,callID:u}]);};s.prototype.removeCallSummaries=function(t){'use strict';var u=this;this.$FBRTCCallSummaryStore3(function(v){var w=t.length;for(var x=0;x<w;x++){var y=t[x].peerID,z=t[x].callID;if(v[y]&&v[y][z]){delete v[y][z];if(u.$FBRTCCallSummaryStore7(v[y]))delete v[y];}}return v;},u.$FBRTCCallSummaryStore2.logError.bind(u.$FBRTCCallSummaryStore2,null,null));};s.prototype.getLoggableSummaries=function(){'use strict';var t=this.$FBRTCCallSummaryStore6(),u=[];for(var v in t)if(t.hasOwnProperty(v))for(var w in t[v])if(t[v].hasOwnProperty(w)){var x=this.$FBRTCCallSummaryStore4(t[v][w],q);if(x)u.push(x);}return u;};s.prototype.$FBRTCCallSummaryStore7=function(t){'use strict';for(var u in t)if(t.hasOwnProperty(u))return false;return true;};s.prototype.$FBRTCCallSummaryStore5=function(t){'use strict';var u={__t:Date.now(),__d:t.toJsonString()};return u;};s.prototype.$FBRTCCallSummaryStore4=function(t,u){'use strict';if(t)if(!u||Date.now()-t.__t>=u)return i.fromJsonString(t.__d);return null;};s.prototype.$FBRTCCallSummaryStore6=function(){'use strict';var t=this.$FBRTCCallSummaryStore1.get(n)||{};return t;};s.prototype.$FBRTCCallSummaryStore3=function(t,u,v,w){'use strict';if(v===undefined||v===null)v=p;var x=this.$FBRTCCallSummaryStore6(),y=this.$FBRTCCallSummaryStore6(),z=t(x);if(z===null)return;var aa=this.$FBRTCCallSummaryStore6();if(k(y,aa)){this.$FBRTCCallSummaryStore1.set(n,z);this.$FBRTCCallSummaryStore2.logToConsole('Updated summaries');}else if(v>0){u('Retry lock');if(w){var ba=this;setTimeout(function(){ba.$FBRTCCallSummaryStore3(t,u,v-1,true);},o);}else this.$FBRTCCallSummaryStore3(t,u,v-1,true);}else u('Failed to lock');};f.exports=s;},null);
__d('FBRTCCallActions',['FBRTCDispatcher','keyMirror'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=i({START_CALL:null}),k={Types:j,startCall:function(l,m,n,o){h.dispatch({type:j.START_CALL,peerID:l,callID:m,isCaller:n,audioOnly:o});}};f.exports=k;},null);
__d('FBRTCScreenSharingLogger',['Log','MarauderLogger','formatDate','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l='webrtc_screen_sharing',m=k({P2P_VIDEO_CALL:null}),n=k({screen_sharing_action:null,screen_sharing_error:null}),o=k({PEER_ID:null,SESSION_ID:null,CONTEXT_TYPE:null,CONTENT:null}),p=k({SCREEN_SHARING_TOGGLED:null,SCREEN_SHARING_CANCELLED:null,SCREEN_SHARING_ENABLED:null,SCREEN_SHARING_DISABLED:null,SCREEN_SHARING_EXT_DIALOG:null,SCREEN_SHARING_EXT_LINK:null}),q=null;r.getInstance=function(){if(!q)q=new r();return q;};r.prototype.logAction=function(s,t,u,v){var w={};w[n.screen_sharing_action]=u;w[o.PEER_ID]=s;w[o.SESSION_ID]=t;w[o.CONTEXT_TYPE]=m.P2P_VIDEO_CALL;w[o.CONTENT]=v;this.$FBRTCScreenSharingLogger1(n.screen_sharing_action,w);this.logToConsole(s,t,u);};r.prototype.logError=function(s,t,u){var v={};v[o.PEER_ID]=s;v[o.SESSION_ID]=t;v[o.CONTEXT_TYPE]=m.P2P_VIDEO_CALL;v[o.CONTENT]=u;this.$FBRTCScreenSharingLogger1(n.screen_sharing_error,v);this.logToConsole(s,t,u);};r.prototype.logToConsole=function(s,t,u){};r.prototype.$FBRTCScreenSharingLogger1=function(s,t){i.log(s,l,t);};function r(){}r.Action=p;f.exports=r;},null);
__d("FBRTCVersionDetection",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={isChrome:function(){return !!navigator.webkitGetUserMedia;},isFirefox:function(){return !!navigator.mozGetUserMedia;},webrtcVersion:function(){if(this.isFirefox())return parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10);if(this.isChrome()){var i=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(i!==null){return parseInt(i[2],10);}else return 999;}return 0;}};f.exports=h;},null);
__d('FBRTCScreenSharingUtils',['FBRTCScreenSharingLogger','FBRTCStruct','FBRTCVersionDetection','RTCConfig','FBRTCSupport'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=new i(['UNKNOWN','NOT_INSTALLED','INSTALLED']),n=m.UNKNOWN,o={RECIPIENT:'SC_CONTENT_SCRIPT',isScreenSharingSupported:function(){return k.ScreenSharingGK;},isSupportedBrowser:function(){return j.isChrome()&&j.webrtcVersion()>=34;},canReceiveScreenSharing:function(){return k.ReceiveScreenGK&&l.isOSSupported()&&o.isSupportedBrowser();},isExtensionInstalled:function(){return n===m.INSTALLED;},checkExtensionInstalled:function(){if(n!==m.UNKNOWN)return;window.addEventListener('message',o.updateExtensionStatus);o._loopForExtensionStatus(5);},_loopForExtensionStatus:function(p){setTimeout(function(){setTimeout(function(){if(n===m.UNKNOWN)window.postMessage({recipient:'SC_CONTENT_SCRIPT',type:'SC_IS_EXT_INSTALLED',text:'is extension installed'},'*');},1);if(p>1)o._loopForExtensionStatus(p-1);},1000);},updateExtensionStatus:function(event){if(event.origin!=window.location.origin||!event.data.type)return;if(event.data.type==='SC_EXT_INSTALLED'){window.removeEventListener('message',o.updateExtensionStatus);n=m.INSTALLED;}},logFailedAttempt:function(p,q){h.getInstance().logAction(p,q,h.Action.SCREEN_SHARING_TOGGLED,'feature not available');}};f.exports=o;},null);
__d('FBRTCConfig',['FBRTCScreenSharingUtils','RTCConfig','UserAgent'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={},l={setConfig:function(m,n,o){k=m;},statsInterpreterConfig:function(){return {rtt_weight:2,frr_weight:800,plr_weight:500,score_threshold:1000,bad_score_count:3};},settingsEnabled:function(){return k.enable_settings;},shouldAutoDisableVideo:function(){return false;},unsupportedBrowserUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.unsupported_browser)return k.troubleshooting_urls.unsupported_browser;return 'https://www.facebook.com/help/211644178877843';},userMediaErrorUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_error)return k.troubleshooting_urls.user_media_error;return 'https://www.facebook.com/help/232232800134371';},userMediaPermissionErrorUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_permission_error)return k.troubleshooting_urls.user_media_permission_error;return 'https://www.facebook.com/help/232232800134371';},supportedSignalingExperiments:function(){var m=[];if(j.isBrowser('Chrome')||j.isBrowser('Opera'))m.push('sdp_update');if(h.canReceiveScreenSharing())m.push('screen_sharing');return m;},isMessengerDotCom:function(){return k.is_messenger_dot_com;},useMessengerCallUI:function(){return k.messenger_call_ui;},shouldCreateDataChannel:function(){return k.data_channel;},disableURLManager:function(){return k.disable_url_manager;},useCurrentWindow:function(){return k.use_current_window;}};f.exports=l;},null);
__d('FBRTCCallControlActions',['FBRTCDispatcher','keyMirror'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=i({ACCEPT_ESCALATION:null,HANG_UP:null,PARENT_WINDOW_START_CALL:null,TOGGLE_FULL_SCREEN:null,TOGGLE_MUTE_AUDIO:null,TOGGLE_MUTE_VIDEO:null,TOGGLE_SCREEN_SHARING:null,TOGGLE_SELF_VIEW:null,SHOW_SETTINGS:null,START_CALL:null,DECLINE_ESCALATION:null,RECEIVED_SIGNALING_MESSAGE:null,RESET_CALL:null,OPEN_SCREEN_IN_NEW:null,CLOSE_STANDALONE_SCREEN:null}),k={Types:j,hangUp:function(){h.dispatch({type:j.HANG_UP});},toggleMuteAudio:function(){h.dispatch({type:j.TOGGLE_MUTE_AUDIO});},toggleMuteVideo:function(){h.dispatch({type:j.TOGGLE_MUTE_VIDEO});},toggleFullScreen:function(){h.dispatch({type:j.TOGGLE_FULL_SCREEN});},toggleSelfView:function(){h.dispatch({type:j.TOGGLE_SELF_VIEW});},showSettings:function(){h.dispatch({type:j.SHOW_SETTINGS});},toggleScreenSharing:function(){h.dispatch({type:j.TOGGLE_SCREEN_SHARING});},startCall:function(){h.dispatch({type:j.START_CALL});},openScreenInNewWindow:function(){h.dispatch({type:j.OPEN_SCREEN_IN_NEW});},receivedSignalingMessage:function(l){h.dispatch({type:j.RECEIVED_SIGNALING_MESSAGE,message_type:l.msgType,message:l});},acceptEscalation:function(){h.dispatch({type:j.ACCEPT_ESCALATION});},declineEscalation:function(){h.dispatch({type:j.DECLINE_ESCALATION});},resetCall:function(l){h.dispatch({type:j.RESET_CALL,trigger:l});},parentWindowStartCall:function(){h.dispatch({type:j.PARENT_WINDOW_START_CALL});}};f.exports=k;},null);
__d('FBRTCLocalMessageQueue',['CacheStorage','FBRTCLogger','Map','RTCConfig'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='localstorage',m='RTC_',n='offer',o='offer_msg',p='data_',q=30*1000,r=15*1000,s=500,t=new j();function u(){'use strict';this.$FBRTCLocalMessageQueue1=i.getInstance();}u.prototype.enqueueOffer=function(v,w){'use strict';var x=this.$FBRTCLocalMessageQueue2(v,o);this.$FBRTCLocalMessageQueue3(x,n,w);};u.prototype.getOffer=function(v){'use strict';var w=this.$FBRTCLocalMessageQueue2(v,o);return this.$FBRTCLocalMessageQueue4(w,n);};u.prototype.removeOffer=function(v){'use strict';var w=this.$FBRTCLocalMessageQueue2(v,o);w.remove(n);};u.prototype.enqueueMessage=function(v,w,x,y){'use strict';var z=p+x.toString();if(k.LocalstorageRolloutGK){var aa=t.get(v)||new j();aa.set(z,y);t.set(v,aa);}else{var ba=this.$FBRTCLocalMessageQueue2(v,w);this.$FBRTCLocalMessageQueue3(ba,z,y);}this.$FBRTCLocalMessageQueue1.logToConsole('Queued '+z);};u.prototype.drainQueue=function(v,w){'use strict';var x=t.get(v)||new j(),y,z;for(var aa=x,ba=Array.isArray(aa),ca=0,aa=ba?aa:aa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){if(ba){if(ca>=aa.length)break;var da=aa[ca++];y=da[0];z=da[1];}else{ca=aa.next();if(ca.done)break;var ea=ca.value;y=ea[0];z=ea[1];}void y;w(z);}t.set(v,new j());};u.prototype.enableDequeuing=function(v,w,x,y){'use strict';if(y===undefined)y=r;this.$FBRTCLocalMessageQueue5(v,w,x,y);};u.prototype.$FBRTCLocalMessageQueue5=function(v,w,x,y){'use strict';var z=this.$FBRTCLocalMessageQueue2(v,w),aa=z.keys(),ba=aa.length;for(var ca=0;ca<ba;ca++){var da=this.$FBRTCLocalMessageQueue6(z,aa[ca]);if(da&&x)x(da);}this.$FBRTCLocalMessageQueue1.logToConsole('Dequeued '+ba+' ('+v+') with '+y+' left)');if(y>0){y-=s;setTimeout((function(){this.$FBRTCLocalMessageQueue5(v,w,x,y);}).bind(this),s);}};u.prototype.$FBRTCLocalMessageQueue3=function(v,w,x){'use strict';var y={__t:Date.now(),__d:x};v.set(w,y);};u.prototype.$FBRTCLocalMessageQueue4=function(v,w){'use strict';var x=v.get(w);if(x&&this.$FBRTCLocalMessageQueue7(x)){return x.__d;}else if(x)v.remove(w);return null;};u.prototype.$FBRTCLocalMessageQueue6=function(v,w){'use strict';var x=this.$FBRTCLocalMessageQueue4(v,w);if(x!==null){v.remove(w);return x;}return null;};u.prototype.$FBRTCLocalMessageQueue7=function(v){'use strict';return Date.now()-v.__t<q;};u.prototype.$FBRTCLocalMessageQueue2=function(v,w){'use strict';return new h(l,''+m+v+'_'+w+'_');};f.exports=u;},null);
__d('FBRTCMessageListener',['Arbiter','ChannelConstants','FBRTCCallControlActions','FBRTCLocalMessageQueue','FBRTCSupport','RTCConfig','guid','invariant','mixInEventEmitter'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=45*1000,r='rtc_child_window_ready',s='rtc_child_window_start_call',t='rtc_child_window_message',u=[],v=null,w=null,x=null,y=null,z=null,aa=false,ba=null,ca={init:function(da,ea){if(aa)return;aa=true;h.subscribe(i.getArbiterType('webrtc'),(function(ga,ha){this._onMessage(ha.obj);}).bind(this));if(m.RtcConferencingGK)h.subscribe(i.getArbiterType('rtc_multi_json'),(function(ga,ha){this._onMultiwayMessage(ha.obj);}).bind(this));this._localMessageQueue=new k();if(m.PassMessagesBetweenWindowsGK){if(l.isWebrtcSupported()&&window.addEventListener){var fa=da?this._handleWindowMessageToChild.bind(this):this._handleWindowMessageToParent.bind(this);window.addEventListener('message',fa,false);}if(da)this._connectToParentWindow(ea);}},setParentWindowNonce:function(da){y=da;},generateNewNonce:function(){z=n();return z;},setMultiwayMessageHandler:function(da,ea){!!ba?o(0):undefined;ba=ea?da.bind(ea):da;},_onMultiwayMessage:function(da){this.emit('multiwayMessageReceived',da);if(ba)ba(da);},setMessageHandler:function(da,ea){!!v?o(0):undefined;v=ea?da.bind(ea):da;while(u.length)v(u.shift());},removeMessageHandler:function(){v=null;},_onMessage:function(da){this.emit('messageReceived',da);if(v){v(da);}else u.push(da);this._passMessageToChildWindow(da);},_connectToParentWindow:function(da){if(window.opener&&window.opener.postMessage){var ea={type:r,nonce:y,childNonce:this.generateNewNonce(),peerID:da};window.opener.postMessage(ea,window.location.origin);}},_verifyWindowMessage:function(event){return event.origin===window.location.origin&&event.data&&z&&event.data.nonce===z;},_handleWindowMessageToParent:function(event){if(!this._verifyWindowMessage(event))return;if(event.data.type===r){this.setParentWindowNonce(event.data.childNonce);this._setChildWindow(event.source);if(m.LocalstorageRolloutGK)this._replayQueuedMessagesToChild(event.data.peerID,w);}},_handleWindowMessageToChild:function(event){if(!this._verifyWindowMessage(event))return;if(event.data.type===t)this._onMessage(event.data.message);if(event.data.type===s)j.parentWindowStartCall();},_replayQueuedMessagesToChild:function(da,ea){this._localMessageQueue.drainQueue(da,function(fa){var ga={type:t,nonce:y,message:fa};ea.postMessage(ga,window.location.origin);});},_setChildWindow:function(da){w=da;clearTimeout(x);x=setTimeout(function(){w=null;},q);this._startCallInChildWindow();this.generateNewNonce();},_passMessageToChildWindow:function(da){if(w){var ea={type:t,nonce:y,message:da};w.postMessage(ea,window.location.origin);}},_startCallInChildWindow:function(){if(w){var da={type:s,nonce:y};w.postMessage(da,window.location.origin);}}};p(ca,{messageReceived:true,multiwayMessageReceived:true});f.exports=ca;},null);
__d('FBRTCUtils',['emptyFunction','randomInt','AsyncRequest','FBID','RTCConfig'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=6000,n={attachMediaStream:function(o,p){if(window.webkitRTCPeerConnection){o.src=window.webkitURL.createObjectURL(p);}else{o.mozSrcObject=p;o.play();}},reattachMediaStream:function(o,p){if(window.webkitRTCPeerConnection){o.src=p.src;}else{o.mozSrcObject=p.mozSrcObject;o.play();}},generateRandomInt:function(){return i(0,4294967294)+1;},aboutEqual:function(o,p){return o-p<.01&&p-o<.01;},sendServerRequest:function(o,p,q,r,s,t){p=p||h;q=q||h;r=r||false;s=s||m;t=t||{};var u=new j().setURI(o).setData(t).setAllowCrossPageTransition(true).setHandler(p).setErrorHandler(q).setTimeoutHandler(s,function(){q();});if(r)u.setOption('asynchronous',false);u.send();},isCollabCallable:function(o){return !k.isUser(o)&&l.CollaborationVideoGroupCallGK;}};f.exports=n;},null);
__d("XVideoCallInitController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videocall\/init\/",{peer_id:{type:"Int",required:true},call_id:{type:"Int",required:true},is_caller:{type:"Bool",defaultValue:false},audio_only:{type:"Bool",defaultValue:false}});},null,{});
__d("XVideoCallController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videocall\/incall\/",{peer_id:{type:"Int",required:true},call_id:{type:"Int"},is_caller:{type:"Bool",defaultValue:false},audio_only:{type:"Bool",defaultValue:false},nonce:{type:"String"}});},null,{});
__d("XGroupCallSigningController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/groupcall\/init\/",{call_id:{type:"String",required:true},is_caller:{type:"Bool",defaultValue:false},audio_only:{type:"Bool",defaultValue:true},users_to_call:{type:"StringSet",defaultValue:[]}});},null,{});
__d("XGroupCallController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/groupcall\/{?call_id}\/",{call_id:{type:"String",required:true},is_caller:{type:"Bool",defaultValue:false},audio_only:{type:"Bool",defaultValue:true},users_to_call:{type:"StringSet",defaultValue:[]}});},null,{});
__d('FBRTCUrlManager',['FBRTCConfig','FBRTCLogger','FBRTCUtils','XVideoCallInitController','XVideoCallController','XGroupCallSigningController','XGroupCallController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=3,p=function(u,v,w,x){i.getInstance().logCallAction(u,v,i.CallAction.OLD_URI);return l.getURIBuilder().setInt('peer_id',u).setInt('call_id',v).setBool('is_caller',w).setBool('audio_only',x).getURI();},q=function(u,v,w,x,y,z,aa){if(aa===undefined||aa===null)aa=o;var ba=k.getURIBuilder().setInt('peer_id',u).setInt('call_id',v).setBool('is_caller',w).setBool('audio_only',x).getURI();j.sendServerRequest(ba,function(ca){y(ca.payload.uri);},function(ca){if(aa>0){q(u,v,w,x,y,z,aa-1);}else y(p(u,v,w,x));});},r=function(u,v,w,x,y,z,aa){if(aa===undefined||aa===null)aa=o;var ba=m.getURIBuilder().setString('call_id',u).setBool('is_caller',w).setBool('audio_only',x).setStringSet('users_to_call',v).getURI();j.sendServerRequest(ba,function(ca){y(ca.payload.uri);},function(ca){if(aa>0){r(u,v,w,x,y,z,aa-1);}else{var da=n.getURIBuilder().setString('call_id',u).setBool('is_caller',w).setBool('audio_only',x).setStringSet('users_to_call',v).getURI();y(da);}});},s=function(u){if(h.disableURLManager())return;window.history.replaceState({},'',u);},t={init:function(u){this._peerID=u;},onCallStarted:function(){s(p(this._peerID));},getCallUri:q,getGroupCallUri:r,getNonceUri:function(u,v,w,x,y){return l.getURIBuilder().setInt('peer_id',u).setInt('call_id',v).setBool('is_caller',w).setBool('audio_only',x).setString('nonce',y).getURI();}};f.exports=t;},null);
__d('FBRTCCallUI',['BanzaiLogger','UserAgent','FBRTCCallActions','FBRTCCallSummary','FBRTCCallSummaryStore','FBRTCConfig','FBRTCConstants','FBRTCLogger','FBRTCMessageListener','FBRTCUrlManager','RTCConfig','pageID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=null,u={openGroupCallAsCaller:function(v,w,x,y){if(!t&&window.rtcCallChildWindow){t=window.rtcCallChildWindow;window.rtcCallChildWindow=null;}if(this._shouldFocusCallWindow(v)){t.focus();return;}if(this._shouldCloseCallWindow())t.close();var z=true;this._openGroupCall(v,w,z,y,null);},openGroupCallAsCallee:function(v,w){var x=false,y=true;this._openGroupCall(v,[],x,y,w);},_openGroupCall:function(v,w,x,y,z){var aa=this._windowPosition(),ba=['menubar=no','location=no','scrollbars=no','status=no','personalbar=no',aa.height,aa.width,aa.top,aa.left].join(',');if(this._isSparkBrowser())ba='';if(z){t=window.open(z,'Group Call',ba);}else{t=window.open('','Group Call',ba);q.getGroupCallUri(v,w,x,y,function(ca){t.location=ca;},function(){});}if(window.focus)t.focus();},openAsCaller:function(v,w,x,y){if(!t&&window.rtcCallChildWindow){t=window.rtcCallChildWindow;window.rtcCallChildWindow=null;}if(this._shouldFocusCallWindow(v)){t.focus();return;}if(this._shouldCloseCallWindow())t.close();h.log('VideoCallLoggerConfig',{event:'open_as_caller'});o.getInstance().logCallAction(v,w,o.CallAction.START_CALL,null,x);var z=new k({peerID:v,callID:w,isCaller:true});z.onCallStarted(x);this._open(v,w,true,z,false,y);},openAsCallee:function(v,w,x,y,z){h.log('VideoCallLoggerConfig',{event:'open_as_callee'});this._open(v,w,false,x,y,z);},_shouldFocusCallWindow:function(v){return t&&!t.closed&&t.rtcCallInProgessWith===v;},_shouldCloseCallWindow:function(){return t&&!t.closed&&!t.rtcCallInProgessWith;},_open:function(v,w,x,y,z,aa){y.addExtraInfo(o.Key.INITIATED_BY_PAGE_ID,s);y.onCallEnded(n.CallEndReason.CLIENT_ERROR,false,true,'PopupPending');y.save(l.getInstance());if(m.useCurrentWindow()){p.removeMessageHandler();j.startCall(v,w,x,aa);return;}var ba=this._windowPosition(),ca=['menubar=no','location=no','scrollbars=no','status=no','personalbar=no',ba.height,ba.width,ba.top,ba.left].join(',');if(this._isSparkBrowser())ca='';z=q.getNonceUri(v,w,x,aa,p.generateNewNonce());h.log('VideoCallLoggerConfig',{event:'open_popup'});if(!z){t=window.open('','Video Call',ca);this._setUri(t,v,w,x,aa);}else{o.getInstance().logCallAction(v,w,o.CallAction.OPEN_POPUP);t=window.open(z,'Video Call',ca);}t.focus&&t.focus();},_setUri:function(v,w,x,y,z){q.getCallUri(w,x,y,z,function(aa){o.getInstance().logCallAction(w,x,o.CallAction.OPEN_POPUP);v.location=aa;},function(){o.getInstance().logCallAction(w,x,o.CallAction.FAILED_GETTING_URI);});},_windowPosition:function(){var v=960,w=540,x,y,z,aa;if(screen&&screen.width>1280){v=1280;w=720;}if(window.innerWidth!==undefined){y=window.innerWidth;x=window.innerHeight;}else{y=screen.width;x=screen.height;}if(window.screenLeft!==undefined){z=window.screenLeft;aa=window.screenTop;}else{z=window.screenX;aa=window.screenY;}var ba=Math.floor(y/2-v/2+z),ca=Math.floor(x/2-w/2+aa);return {height:'height='+w.toString(),width:'width='+v.toString(),top:'top='+ca.toString(),left:'left='+ba.toString()};},_isSparkBrowser:function(){return i.isBrowser('Chrome < 34')&&i.isBrowser('Chrome > 33');}};f.exports=u;},null);
__d('FBRTCCore',['Bootloader','FBRTCAvailability','FBRTCCallUI','FBRTCSupport','invariant','randomInt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=false,o={startOutgoingCall:function(p,q,r){!!isNaN(parseInt(p,10))?l(0):undefined;if(n)return;n=true;setTimeout(function(){n=false;},1000);if(k.isWebrtcSupported()){var s=this._generateCallID();j.openAsCaller(p,s,q,r);}else h.loadModules(["FBRTCUnsupportedBrowserMessage"],function(t){t.showForOutgoingCall();});},startMultiwayCall:function(p,q,r,s){!(q.length>0)?l(0):undefined;if(n)return;n=true;setTimeout(function(){n=false;},1000);if(k.isWebrtcSupported()){j.openGroupCallAsCaller(p,q,r,s);}else h.loadModules(["FBRTCUnsupportedBrowserMessage"],function(t){t.showForOutgoingCall();});},isAvailableForWebrtcCalling:function(p){return i.isCallable(p);},shouldEnableVideoCalling:function(){return k.isOSSupported();},_generateCallID:function(){return m(0,4294967295);}};f.exports=o;},null);
__d('MercuryTimestamp',['fbt','formatDate','MercuryTimePassed'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=86400000,l=6*k,m={getFormatedTimestamp:function(n){var o=n/1000;return m.getFormattedTimestampByBucket(o,this.getTimeBucket(n));},getFormattedTimestampByBucket:function(n,o){switch(o){case j.TODAY:return {absolute:h._("Heute"),relative:i(n,'g:ia')};case j.WEEK_AGO:return {absolute:i(n,'l'),relative:i(n,'D')};case j.CURRENT_YEAR:return {absolute:i(n,'F j'),relative:i(n,'M j')};default:return {absolute:i(n,'F j, Y'),relative:i(n,'n/j/y')};}},getTimeBucket:function(n){var o=new Date(n),p=new Date(),q=new Date(p.getFullYear(),p.getMonth(),p.getDate());if(q<o){return j.TODAY;}else if(q-l<o){return j.WEEK_AGO;}else if(q.getFullYear()===o.getFullYear()){return j.CURRENT_YEAR;}else return j.OTHER_YEAR;},getPreciseTimestamp:function(n){return i(new Date(n),m.getPreciseFormat(n));},getPreciseFormat:function(n){var o=m.getTimeBucket(n);switch(o){case j.TODAY:return 'g:ia';case j.WEEK_AGO:return 'l g:ia';case j.CURRENT_YEAR:return 'F jS, g:ia';case j.OTHER_YEAR:default:return 'F j, Y g:i a';}}};f.exports=m;},null);
__d('MercurySyncNewMessageTransformer',['MercuryActionType','MercuryIDs','MercurySingletonProvider','MercuryTimestamp','MessagingTag'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();m.getForFBID=function(o){return n.getForFBID(o);};m.get=function(){return n.get();};function m(o){this.$MercurySyncNewMessageTransformer1=o;}m.prototype.transform=function(o){var p=parseInt(o.messageMetadata.timestamp,10),q=k.getFormatedTimestamp(p);return {message_id:o.messageMetadata.messageId,threading_id:null,offline_threading_id:o.messageMetadata.offlineThreadingId,author:i.getParticipantIDFromUserID(o.messageMetadata.actorFbId),author_email:o.messageMetadata.actorFbId+'@facebook.com',timestamp:p,timestamp_absolute:q.absolute,timestamp_relative:q.relative,timestamp_datetime:q.relative,timestamp_time_passed:k.getTimeBucket(p),is_unread:this.$MercurySyncNewMessageTransformer1!==o.messageMetadata.actorFbId,is_forward:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,forward_count:0,forward_message_ids:[],source:o.messageMetadata.tags[0],is_spoof_warning:false,folder:l.INBOX,thread_fbid:o.messageMetadata.threadKey.threadFbId,other_user_fbid:o.messageMetadata.threadKey.otherUserFbId,body:o.body,html_body:null,subject:null,has_attachment:null,attachments:[],raw_attachments:[],ranges:[],thread_id:null,sync_id:null,action_id:null,action_type:h.USER_GENERATED_MESSAGE,is_from_iris:true};};var n=new j(m);f.exports=m;},null);
__d('SoundPlayer',['Arbiter','Flash','URI','createArrayFromMixed'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={},m=null,n=false,o='so_sound_player',p='/swf/SoundPlayer.swf?v=1',q=null,r={};function s(ca){var da=new j(ca);if(!da.getDomain())return new j(window.location.href).setPath(da.getPath()).toString();return ca;}function t(ca){var da=new j(ca).getPath();if(/\.mp3$/.test(da))return 'audio/mpeg';if(/\.og[ga]$/.test(da))return 'audio/ogg';return '';}function u(){if(!q){var ca=document.createElement('audio');if(!ca||!ca.canPlayType)return null;ca.setAttribute('preload','auto');document.body.appendChild(ca);q=ca;}return q;}function v(ca){return r[ca];}function w(ca,da){r[ca]=da;}function x(){var ca=document[o]||window[o];if(ca)if(!ca.playSound&&ca.length)ca=ca[0];return ca&&ca.playSound&&ca.loopSound?ca:null;}function y(){return n;}function z(ca,da,ea){m={path:ca,sync:da,loop:ea};}function aa(){n=true;if(m){var ca=x();if(m.loop){ca.loopSound(m.path,m.sync);}else ca.playSound(m.path,m.sync);}}var ba={init:function(ca){ca=k(ca);var da;for(var ea=0;ea<ca.length;++ea){da=ca[ea];if(l[da])return;}var fa=u();for(ea=0;fa&&ea<ca.length;++ea){da=ca[ea];if(fa.canPlayType(da)){l[da]=true;return;}}l['audio/mpeg']=true;if(x())return;try{h.registerCallback(aa,['sound/player_ready','sound/ready']);var ha=document.createElement('div');ha.id='sound_player_holder';document.body.appendChild(ha);var ia=window[o]=i.embed(p,ha,{allowscriptaccess:'always',wmode:'transparent'},{swf_id:o});ia.setAttribute('id',o);ia.setAttribute('width','1px');ia.setAttribute('height','1px');h.inform('sound/player_ready');}catch(ga){}},createAndPlayNewNative:function(ca,da){var ea=document.createElement('audio');ea.setAttribute('preload','auto');document.body.appendChild(ea);ea.src=s(ca);if(da){ea.setAttribute('loop','');}else ea.removeAttribute('loop');ea.play();w(ca,ea);return;},play:function(ca,da){ca=k(ca);var ea=u(),fa,ga;for(var ha=0;ea&&ha<ca.length;++ha){fa=ca[ha];var ia=v(fa);if(ia){if(da){ia.setAttribute('loop','');}else ia.removeAttribute('loop');ia.play();return;}ga=t(fa);if(!ea.canPlayType(ga))continue;ba.init([ga]);ba.createAndPlayNewNative(fa,da);return;}for(ha=0;ha<ca.length;++ha){fa=s(ca[ha]);ga=t(fa);if(ga!='audio/mpeg')continue;ba.init([ga]);var ja=x();if(!y()){z(fa,true,da);return;}else if(ja){if(da){ja.loopSound(fa,true);}else ja.playSound(fa,true);return;}}},stop:function(ca){ca=k(ca);for(var da=0;da<ca.length;++da){var ea=s(ca[da]),fa=v(ca[da]),ga=x();if(fa&&fa.src==ea){fa.pause();fa.removeAttribute('src');fa.src=ea;}else ga&&ga.stopSound(ea);}}};f.exports=ba;},null);
__d('SoundSynchronizer',['SoundPlayer','WebStorage','createArrayFromMixed'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k='fb_sounds_playing3';function l(){var p=i.getLocalStorage();if(p)try{var r=p[k];if(r){r=JSON.parse(r);if(Array.isArray(r))return r;}}catch(q){}return [];}function m(p){var q=i.getLocalStorage();if(q){var r=l();r.push(p);while(r.length>5)r.shift();try{q[k]=JSON.stringify(r);}catch(s){}}}function n(p){return l().some(function(q){return q===p;});}var o={play:function(p,q,r){p=j(p);q=q||p[0]+Math.floor(Date.now()/1000);if(n(q))return;h.play(p,r);m(q);},isSupported:function(){return !!i.getLocalStorage();}};f.exports=o;},null);
__d('SoundRPC',['Event','SoundSynchronizer'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(l,m,n){i.play(l,m,n);}var k={playLocal:j,playRemote:function(l,m,n,o){var p={paths:m,sync:n,loop:o};l.postMessage(JSON.stringify(p),'*');},supportsRPC:function(){return !!window.postMessage;},_listen:function(){h.listen(window,'message',function(l){if(!/\.facebook.com$/.test(l.origin))return;var m=JSON.parse(l.data||'{}');j(m.paths,m.sync,m.loop);});}};f.exports=k;},null);
__d('Sound',['SoundInitialData','SoundPlayer','SoundRPC','SoundSynchronizer','URI','UserAgent_DEPRECATED','isFacebookURI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=null,p={init:function(t){if(!o)i.init(t);},play:function(t,u,v){if(o){j.playRemote(o.contentWindow,t,u,false);}else j.playLocal(t,u,v);},stop:function(t){if(!o)i.stop(t);}},q=new l(location.href);if(q.getSubdomain()&&q.getSubdomain()!=='www')q.setSubdomain('www');var r=q.getDomain();function s(){if(m.ie()<9)return false;if(h.RPC_DISABLED)return false;return k.isSupported()&&j.supportsRPC();}if(n(q)&&location.host!==r&&s()){o=document.createElement('iframe');o.setAttribute('src','//'+r+'/sound_iframe.php');o.style.display='none';document.body.appendChild(o);}f.exports=p;},null);K      VKVK;uWK   Ba,:https://fbstatic-a.akamaihd.net/rsrc.php/v2/yV/r/G-U-ouo721G.js necko:classified 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAQAAgAAAAAAAAAAAAAAAAAAAAAB4vFIJp5wRkeyPxAQ9RJGKPqbqVvKO0mKuIl8ec8o/uhmCjImkVxP+7sgiYWmMt8F+O2DZM7ZTG6GukivU8OT5gAAAAAAAAXAMIIFvDCCBKSgAwIBAgIUPbXhC4Xsu7H3z2HTJ2qImwWmfEMwDQYJKoZIhvcNAQELBQAwgY0xCzAJBgNVBAYTAk5MMRIwEAYDVQQHEwlBbXN0ZXJkYW0xJTAjBgNVBAoTHFZlcml6b24gRW50ZXJwcmlzZSBTb2x1dGlvbnMxEzARBgNVBAsTCkN5YmVydHJ1c3QxLjAsBgNVBAMTJVZlcml6b24gQWthbWFpIFN1cmVTZXJ2ZXIgQ0EgRzE0LVNIQTIwHhcNMTUwODI3MTYxMDEyWhcNMTYwODI3MTYxMDExWjBtMQswCQYDVQQGEwJVUzELMAkGA1UECBMCTUExEjAQBgNVBAcTCUNhbWJyaWRnZTEhMB8GA1UEChMYQWthbWFpIFRlY2hub2xvZ2llcyBJbmMuMRowGAYDVQQDExFhMjQ4LmUuYWthbWFpLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMEsC1Bf+D5X49PrJxQQynzSoPaTqlm/R6G6xlDErWOJauViiexo6vmzahzzSlMEPVYpyT5oRd3SB4Qx7548TyiC90yse+aFur0qrNLeNMG7npVWA0up2v4a8msqYRACxoHcLolFXNFPNWtBTsRW42Ce+pg94pP4gWvBeFVclt3v9x2mr8RHafRNVLJvAJi+eg2mZlfeccqCWrIXKp/xZGUWBswTK+TFC2s1pJNxQkDMYpmLdgte0H0h4IRh8V7elj7TP/8Z8i0l4SxIHNbuqA8HvjBsundiNujlykBR9JSvX238ATPLOFrqkQQz6UAYHo2RRH7X72Uvbitu38jPYVcCAwEAAaOCAjEwggItMAwGA1UdEwEB/wQCMAAwTAYDVR0gBEUwQzBBBgkrBgEEAbE+ATIwNDAyBggrBgEFBQcCARYmaHR0cHM6Ly9zZWN1cmUub21uaXJvb3QuY29tL3JlcG9zaXRvcnkwga8GCCsGAQUFBwEBBIGiMIGfMC0GCCsGAQUFBzABhiFodHRwOi8vdmFzc2cxNDIub2NzcC5vbW5pcm9vdC5jb20wNgYIKwYBBQUHMAKGKmh0dHBzOi8vY2FjZXJ0LmEub21uaXJvb3QuY29tL3Zhc3NnMTQyLmNydDA2BggrBgEFBQcwAoYqaHR0cHM6Ly9jYWNlcnQuYS5vbW5pcm9vdC5jb20vdmFzc2cxNDIuZGVyMG4GA1UdEQRnMGWCEWEyNDguZS5ha2FtYWkubmV0gg4qLmFrYW1haWhkLm5ldIIWKi5ha2FtYWloZC1zdGFnaW5nLm5ldIIPKi5ha2FtYWl6ZWQubmV0ghcqLmFrYW1haXplZC1zdGFnaW5nLm5ldDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFPi9+q9zd8bHG/lLTRGn0TOvr3IRMD4GA1UdHwQ3MDUwM6AxoC+GLWh0dHA6Ly92YXNzZzE0Mi5jcmwub21uaXJvb3QuY29tL3Zhc3NnMTQyLmNybDAdBgNVHQ4EFgQUwHfR+EVeIyYOCfrHIM4gYFwsUd8wDQYJKoZIhvcNAQELBQADggEBALu54DWULbb7PuC5sYITWHJAFLikko7suU7mUu2a/QvS/GNNHfm4ny+on2w++/itYAKrsNMXkX1zglqtX6AACSUlgw7K6G7CoEVJXBntkBmt9wAJXroe2jMgWYvpbmYkcyaNRc4VvOK9FjvHslqXa5Y6NArfI5kRfdljblFQXR2sTYyYk0Dqqq8COCs62GhyLlP/oohQU0hA6EtomF5VFNlokO9qa+IAHrp2lR/+BLYcwPgOCxszCZikcmP5zyAnkte1Blh9kBQnKf6J6wTZsUUPcLktNr7FFqRIay8moKUuxYiSqlE4kSktcYqXy5cGrgYfwGYM93+0O3y8QZ30vLHALwADAAAAAAEBAAA= request-method GET response-head HTTP/1.1 200 OK
access-control-allow-origin: *
Cache-Control: public, max-age=31358637
Content-MD5: 7oyQ36zn43PLnQuGvbAhgA==
Content-Type: application/x-javascript; charset=utf-8
Date: Thu, 15 Oct 2015 15:55:15 GMT
Expires: Wed, 12 Oct 2016 14:39:12 GMT
Last-Modified: Mon, 01 Jan 2001 08:00:00 GMT
Timing-Allow-Origin: *
x-content-type-options: nosniff
X-FB-Debug: LQPuEuH/ilE9152MUooFZnVlCrTFsTWPNuUJ5zzeEdF/Z91V1QqYdvYultBF69q5ylDByPZ1hgxZOKFs6JQpDA==
X-Firefox-Spdy: 3.1
 uncompressed-len 0   o