/*!CK:2773861613!*//*1442805361,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["87tQA"]); }

__d('TickerStoryList',['Event','Animation','Arbiter','AsyncRequest','AsyncSignal','Bootloader','ChannelConstants','LegacyContextualDialog','CSS','DOM','HTML','Keys','LayerFadeOnHide','LiveTimer','NavigationMessage','Parent','Rect','Run','ScrollableArea','SelectorDeprecated','Style','TickerController','TickerReadStateTracking','Toggler','UFIUIEvents','URI','UserActivity','UserAgent_DEPRECATED','Vector','DOMVector','BanzaiODS','clickRefAction','collectDataAttributes','containsNode','cx','csx','ex','emptyFunction','ge','getElementText','goURI','setTimeout','throttle','tickerPhoteSnowLiftOpenStatus'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya){if(c.__markCompiled)c.__markCompiled();var za=15000,ab={};function bb(cb,db,eb){ab[cb.id]=this;ca.setActiveInstance(this);this._root=cb;this._content=q.find(cb,'.ticker_stream');this._stories=q.find(this._root,'.tickerActivityStories');this._scrollableArea=db;this._container=q.find(cb,'div.uiScrollableAreaWrap');this._newestStory={};this._objectIDs=[];this._fetchedStories={};this._fetchedStoriesDialog={};this._storyDialogResources={};this._removedStoryIDs=[];this._storiesToRemove=[];var fb=Date.now();this._initTime=fb;this._lastUpdate=fb;this._lastPull=fb;this._lastInsert=fb;this._pollOnly=false;this._autoloadStoryIndex=1;this._scrollTopThreshold=100;this._scrollTopPrompt=q.find(this._root,'.scrollTopPrompt');this._scrollTopPromptVisible=false;this._maxStoriesToKeep=50;this._minStoriesToKeep=25;this._tickerInSidebarMode=!!w.byClass(this._root,'fbChatSidebar');this._loadStoriesWithActions();ma('ticker_flyout');ma('ticker_flyout_prefetch');ma('ticker_flyout_loadtime');ma('ticker_stream');this._uaCurStoryIDFetch=null;this._uaCurStoryIDPrefetch=null;var gb=q.create('div',{className:'storyQueue hidden_elem'});this._storyQueue=gb;q.appendContent(this._root,gb);this._lastKStories={head:null,tail:null,count:0,actors:{},apps:{},stories:{}};this._dedupeKeys={};this._initObjectIDs();this._initConfig(eb);this._resetMorePager();this._initListeners();this._initSubscriptions(eb);j.inform('ticker/init',this,j.BEHAVIOR_PERSISTENT);this._poll();}Object.assign(bb,{instances:function(){return ab;}});Object.assign(bb.prototype,{ADS_IDLE_MS:300000,FLYOUT_MAX_HEIGHT:450,FLYOUT_OFFSET_THRESHOLD:20,FLYOUT_COMMENT_OFFSET:15,FLYOUT_VIEWPORT_PADDING:75,FLYOUT_ACTION_FOOTER_PADDING:8,FLYOUT_TARGET_HEIGHT_OFFSET:25,DEFAULT_LOOK_BEHIND:10,init:function(cb,db,eb){new bb(cb,db,eb);},_lastKStoriesInsert:function(cb){this._lastKStories.stories[cb.getAttribute("data-story-key")]=true;var db={story:cb,next:null};if(this._lastKStories.head)this._lastKStories.head.next=db;this._lastKStories.head=db;this._lastKStories.count++;if(!this._lastKStories.tail)this._lastKStories.tail=this._lastKStories.head;var eb=cb.getAttribute("data-actor");if(!this._lastKStories.actors[eb])this._lastKStories.actors[eb]=0;this._lastKStories.actors[eb]++;var fb=cb.getAttribute("data-app");if(fb){if(!this._lastKStories.apps[fb])this._lastKStories.apps[fb]=0;this._lastKStories.apps[fb]++;}if(this._lastKStories.count>this.DEFAULT_LOOK_BEHIND){while(this._lastKStories.tail&&!this._lastKStoriesRemove(this._lastKStories.tail.story))this._lastKStories.tail=this._lastKStories.tail.next;if(!this._lastKStories.tail)this._lastKStories.head=null;}},_lastKStoriesRemove:function(cb){var db=cb.getAttribute("data-story-key"),eb=cb.getAttribute("data-actor"),fb=cb.getAttribute("data-app");if(this._lastKStories.stories[db]){delete this._lastKStories.stories[db];this._lastKStories.actors[eb]--;if(fb)this._lastKStories.apps[fb]--;this._lastKStories.count--;return true;}else return false;},_loadStoriesWithActions:function(){var cb=ta('rightCol');if(!cb)return;this._toggleWrapper=q.scry(cb,'.tickerToggleWrapper')[0];if(this._toggleWrapper){var db=q.scry(this._stories,'.tickerStoryWithButton');this._storiesWithActions={};for(var eb=0;eb<db.length;eb++){var fb=db[eb];this._storiesWithActions[fb.getAttribute('data-story-key')]=fb;}}},_initConfig:function(cb){Object.assign(this,{_newest:cb.newest,_page_newest:cb.newest,_timeout:cb.timeout,_heartbeatTimeout:Math.min(5000,cb.heartbeatTimeout),_maxHeartbeatTimeout:Math.max(30000,cb.maxHeartbeatTimeout),_pullTimeout:Math.max(30000,cb.pullTimeout),_insertTimeout:cb.insertTimeout,_maxQueueLength:cb.maxQueueLength,_heartbeatEndpoint:cb.heartbeatEndpoint,_popupOnHover:cb.popupOnHover,_userIdleTimeout:cb.userIdleTimeout,_pollOnly:cb.pollOnly,_tickerSource:cb.tickerSource,_logFlyouts:cb.logFlyouts,_userScrollGaurdDelay:cb.userScrollGaurdDelay,_rescheduleScrollToTopDelay:cb.rescheduleScrollToTopDelay});},_initListeners:function(){this._listeners=h.listen(this._root,{click:this._handleClick.bind(this),keydown:this._handleKeydown.bind(this),mouseout:this._handleMouseout.bind(this),mouseover:this._handleMouseover.bind(this),mousedown:this._tickerDeClicker.bind(this),mouseup:this._handleMouseup.bind(this)});this._listeners.scroll=h.listen(this._container,'scroll',this._handleScroll.bind(this));wa(this._initInfiniteScrollListener.bind(this),0);},_initSubscriptions:function(cb){y.onLeave(this._cleanup.bind(this));this._subscriptions=[j.subscribe(v.NAVIGATION_BEGIN,this._onNavHandler.bind(this)),j.subscribe('composer/publish',this._handleComposerPublish.bind(this)),j.subscribe('Ticker/storiesInserted',this._handleStoriesInserted.bind(this)),j.subscribe('Ticker/fixed',this._setFixed.bind(this,true)),j.subscribe('Ticker/unfixed',this._setFixed.bind(this,false)),j.subscribe('Ticker/resized',this._checkInfiniteScroll.bind(this)),j.subscribe(fa.Comment,this._scrollDialogToBottom.bind(this)),j.subscribe(fa.Changed,this._redrawFlyout.bind(this)),j.subscribe('Ticker/chatOpened',this._handleChatOpened.bind(this))];if(!cb.pollOnly)this._subscriptions.push(j.subscribe(n.getArbiterType('ticker_update'),this._handleTickerPush.bind(this)));if(cb.pushChannel&&!cb.pollOnly)this.setPushChannel(cb.pushChannel);},_handleClick:function(event){if(!(event.button===1||event.altKey||event.ctrlKey||event.metaKey))event.prevent();var cb=event.getTarget();if(this._getButtonFromNode(cb)){this._logUserAction(cb,'click',event);this._handleActionButton(event);return;}var db=this._getStoryFromNode(cb),eb=w.byClass(cb,'tickerStoryAllowClick');if(!db||db==this._selectedStory||eb)return;if(this._storyIsHidden(db))return;if(db==this._activeStory&&!this._selectedStory)this._selecting=true;if(this._storyCanOpenExternally(db)){var fb=db.getAttribute('data-href');if(fb&&!cb.getAttribute('href')){var gb={href:fb},hb=na(cb,['ft','gt']);ma('click',gb,event,'FORCE',hb);}else this._logUserAction(cb,'click',event);this._openStoryExternally(db,event);return;}this._logUserAction(cb,'flyout',event);this._activateStory(db,'click');this._selectStory(db);},_handleMouseover:function(event){this._setLocked(true);var cb=event.getTarget(),db=this._getOpenableStory(cb);if(!db){var eb=w.byClass(cb,"_5wvy");if(eb){clearTimeout(parseInt(eb.getAttribute('data-timeout-token'),10));var fb=wa(function(){bb.removeMarkup(eb,db);},za);eb.setAttribute('data-timeout-token',fb);}return;}event.kill();if(this._popupOnHover){if(!(db.id in this._fetchedStories))this._uaCurStoryIDPrefetch=db.id;this._fetchStory(db);}if(this._selectedStory)return;if(this._popupOnHover){this._clearHoverTimeouts();var gb=this._storyCanOpenExternally(db)?500:1000,hb=this._activeStory?75:gb;this._hoverShowTimeout=this._setTimeout((function(){this._activateStory(db,'hover');this._logUserAction(cb,'flyout',event);}).bind(this),hb);}},_handleMouseout:function(event){var cb=event.getTarget();this._setLocked(false);if(cb==this._getStoryFromNode(cb)){var db=q.scry(cb.parentNode,'.openToggler');for(var eb=0;eb<db.length;eb++)aa.toggle(db[eb]);}this._clearClickedStory();this._scheduleHide();},_handleKeydown:function(event){this._tickerDeClicker(event);var cb=this._activeStory;if(!cb)return;var db=h.getKeyCode(event);switch(db){case s.UP:case s.DOWN:var eb=this._getInsertedStories(),fb;if(event.getModifiers().any){fb=db===s.UP?0:eb.length-1;}else fb=eb.indexOf(cb)+(db===s.UP?-1:1);cb=eb[fb];break;case s.ESC:this._deactivateStory(true);return;default:return;}event.kill();if(!cb)return;this._activateStory(cb,'keypress');this._selectStory(cb);},_fadeTopmostStoryButton:function(){var cb=0,db=15;if(this._storiesWithActions)for(var eb in this._storiesWithActions){var fb=this._storiesWithActions[eb],gb=q.scry(fb,'.tickerInlineActionButton')[0],hb=q.scry(gb,'.tickerActionIcon')[0],ib=ja.getElementPosition(gb).y-ja.getElementPosition(this._toggleWrapper).y;if(ib<cb){ba.set(gb,'opacity',0);ba.set(hb,'opacity',0);}else if(ib>=cb&&ib<db){var jb=(ib-cb)/(db-cb);ba.set(gb,'opacity',jb);ba.set(hb,'opacity',jb);break;}else{ba.set(gb,'opacity',1);ba.set(hb,'opacity',1);}}},_handleScroll:function(){var cb=ya.checkIsOpen();if(cb)this._preventFlyoutDismiss=true;if(!this._preventScrollDismiss&&!cb){if(!this._preventFlyoutDismiss){this._deactivateStory(true);}else this._preventFlyoutDismiss=false;}else this._preventScrollDismiss=false;if(!this._handleScrollThrottled)this._handleScrollThrottled=xa(this._handleScrollInner.bind(this));this._handleScrollThrottled();},_handleScrollInner:function(){this._fadeTopmostStoryButton();this._checkInfiniteScroll();this._setIsUserScrolling();if(!this._scrollLogged){this._scrollLogged=true;var cb=this._stories.childNodes.length,db=this._stories.getAttribute('data-gt'),eb={ticker_scroll:1,number_stories:cb,source:db};ma('scroll',null,null,'FORCE',{gt:eb});}},_setIsUserScrolling:function(){clearTimeout(this._userScrollingToken);if(this._isScrolledToTop()){this._userScrolling=false;return;}this._userScrolling=true;this._userScrollingToken=wa((function(){this._userScrolling=false;this._userScrollingToken=null;}).bind(this),this._userScrollGaurdDelay);},_isUserScrolling:function(){return this._userScrolling;},_handleStoriesInserted:function(){this._initInfiniteScrollListener();if(this._scrollableArea instanceof z)this._scrollableArea.adjustGripper();},_handleActionButton:function(event){var cb=event.getTarget(),db=this._getOpenableStory(cb),eb=this._getStoryDialog(db);if(eb)var fb=eb.subscribe('beforehide',function(){eb.unsubscribe(fb);return false;});},_handleScrollToTopClick:function(){this._scrollToTop(this._poll.bind(this));},_scheduleScrollToTop:function(){this._scrollToTopToken&&clearTimeout(this._scrollToTopToken);this._scrollToTopToken=wa((function(){if(this._isLocked()||this._isUserScrolling()){this._scheduleScrollToTop();}else{this._scrollToTopToken=null;this._scrollToTop();}}).bind(this),this._rescheduleScrollToTopDelay);},_scrollToTop:function(cb){new i(this._container).to('scrollTop',0).ease(i.ease.end).ondone(cb).go();},_clearHoverTimeouts:function(){clearTimeout(this._hoverShowTimeout);clearTimeout(this._hoverHideTimeout);},_getAllStories:function(){return q.scry(this._root,'div.fbFeedTickerStory');},_findStoryById:function(cb){var db=q.scry(this._root,'.fbFeedTickerStory'),eb;for(story in db){eb=db[story];if(cb==this._getStoryDialogParams(eb).token)return eb;}return null;},_getInsertedStories:function(){return this._getAllStories().filter(function(cb){return !p.hasClass(cb,'queuedStory');});},_getQueuedStories:function(){return q.scry(this._storyQueue,'.fbFeedTickerStory.queuedStory');},_getButtonFromNode:function(cb){return w.byClass(cb,'tickerInlineOverlay');},_getStoryFromNode:function(cb){return w.byClass(cb,'fbFeedTickerStory');},_getActionButtonFromStory:function(cb){return q.scry(cb,'.tickerInlineActionButton')[0];},_getOpenableStory:function(cb){var db=this._getStoryFromNode(cb);return this._storyCanOpenDialog(db)?db:null;},_getStoryDialog:function(cb){return this._fetchedStoriesDialog[cb.id]||o.getInstance(cb);},_getStoryDialogParams:function(cb){var db=cb&&cb.getAttribute('data-flyoutdata')||null;return db&&JSON.parse(db)||null;},_storyCanOpenDialog:function(cb){return !!this._getStoryDialogParams(cb)&&!this._storyIsHidden(cb);},_storyCanOpenExternally:function(cb){return !!cb.getAttribute('data-href')||!this._storyCanOpenDialog(cb);},_storyIsHidden:function(cb){return p.hasClass(cb,'tickerStoryHidden');},hideActiveStory:function(){this._activeStory&&this.hideStory(this._activeStory);},hideStory:function(cb){this._deactivateStory();if(ua(cb)==='')q.remove(cb);p.addClass(cb,'tickerStoryHidden');p.removeClass(cb,'tickerStoryClickable');},undoHideStory:function(cb){p.addClass(cb,'tickerStoryClickable');p.removeClass(cb,'tickerStoryHidden');},insertStoriesAtBottom:function(cb){if(!cb)return;var db=q.create('div');db.appendChild(cb);var eb=q.scry(db,'.fbFeedTickerStory'),fb=q.find(db,'.tickerMorePager'),gb=[];for(var hb=0;hb<eb.length;hb++)if(!this.dedupeStory(eb[hb]))gb.push(eb[hb]);if(gb.length){gb.push(fb);q.replace(q.find(this._root,'.tickerMorePager'),gb);}j.inform('Ticker/storiesInserted');},_scheduleHide:function(){if(this._popupOnHover&&!this._selectedStory){this._clearHoverTimeouts();this._hoverHideTimeout=this._setTimeout(this._deactivateStory.bind(this),100);}},_setScrollTopPromptVisible:function(cb){this._scrollTopPromptVisible=cb;p.conditionShow(this._scrollTopPrompt,cb);if(cb&&!this._listeners.scrollTop){this._listeners.scrollTop=h.listen(this._scrollTopPrompt,{click:this._handleScrollToTopClick.bind(this)});}else if(!cb&&this._listeners.scrollTop){this._listeners.scrollTop.click.remove();this._listeners.scrollTop=null;}},_isUserIdle:function(){return !ha.isActive(this._userIdleTimeout);},_schedulePoll:function(){clearTimeout(this._pollToken);this._pollToken=this._setTimeout(this._poll.bind(this),this._timeout);},_poll:function(){if(!this._isTickerVisible())return;if(this._storiesToRemove.length>0){if(this._isInsertingStory)return this._schedulePoll();var cb=this._storiesToRemove.pop();this.removeStory(cb);}var db=!this._isScrolledToTop()&&this._getQueuedStories().length;this._setScrollTopPromptVisible(db);var eb=Date.now(),fb=eb-this._lastInsert;if(fb<this._insertTimeout||this._isLocked())return this._schedulePoll();var gb=this._getQueuedStories(),hb=this._isUserIdle(),ib=gb.length>0;if(ib){var jb=gb.shift();this.insertStory(jb);return this._schedulePoll();}if(hb)return ha.subscribeOnce(this._poll.bind(this));var kb=false,lb=false;if(this._pollOnly){lb=eb-this._lastUpdate>this._heartbeatTimeout;}else kb=eb-this._lastPull>this._pullTimeout;var mb=kb||lb;if(!mb)return this._schedulePoll();this.update({pull:kb,fullpoll:lb});},_updatePollOnlyHeartbeatTimeout:function(){if(this._pollOnly&&this._heartbeatTimeout<this._maxHeartbeatTimeout)this._heartbeatTimeout=Math.min(this._heartbeatTimeout+5000,this._maxHeartbeatTimeout);},update:function(cb){this._updatePollOnlyHeartbeatTimeout();if(!this._pollOnly)return this._schedulePoll();var db={newest:cb.fullpoll||cb.cache_update?this._newest:this._page_newest,source:this._tickerSource};if(!db.newest||db.newest==='0')throw new Error(ra('Trying to request new ticker stories with an invalid cursor %s, with'+' the settings fullpoll %s, cache_update %s, value coming from this.%s',typeof db.newest==='string'?'"'+db.newest+'"':db.newest,cb.fullpoll,cb.cache_update,cb.fullpoll||cb.cache_update?'_newest':'_page_newest'));Object.assign(db,cb);new k().setURI(this._heartbeatEndpoint).setReadOnly(true).setOption('retries',0).setData(db).setHandler(this._handleResponse.bind(this)).setFinallyHandler(this._poll.bind(this)).setAllowCrossPageTransition(true).send();this._lastUpdate=Date.now();if(db.pull)this._lastPull=this._lastUpdate;},insertStory:function(cb){this._lastInsert=Date.now();window.LiveTimer&&u.addTimeStamps(cb);p.removeClass(cb,'queuedStory');if(this._isUserScrolling()){this._fadeStoryIn(cb);}else this._scrollToTop(this._flyStoryIn.bind(this,cb));if(this._storiesWithActions&&p.hasClass(cb,'tickerStoryWithButton'))this._storiesWithActions[cb.getAttribute('data-story-key')]=cb;this._removeOldStories();},_removeOldStories:function(){var cb=this._getInsertedStories();if(cb.length<=this._maxStoriesToKeep)return;var db=this._minStoriesToKeep,eb=cb.slice(db);eb.forEach(q.remove);if(this._storiesWithActions)for(var fb=0;fb<eb.length;fb++)delete this._storiesWithActions[eb[fb].getAttribute('data-story-key')];this._resetMorePager();},_resetMorePager:function(){var cb=this._getInsertedStories();if(!cb||!cb.length)return;var db=cb[cb.length-1].getAttribute('data-ticker-timestamp'),eb=q.scry(this._root,'.tickerMorePager a')[0];if(!eb||!db)return;var fb=new ga(eb.getAttribute('ajaxify'));fb.addQueryData({oldest:db});eb.setAttribute('ajaxify',fb);},_setLocked:function(cb){this._locked=cb;},_isLocked:function(){return !!(this._locked||this._activeStory);},informAndRemoveStory:function(cb,db,eb){var fb=this._getStoryFromNode(cb),gb=fb.getAttribute('data-story-key');q.setContent(fb,db);p.addClass(fb,'highlightedStory');this._setTimeout(this.removeStory.bind(this,gb),eb||6000);},_getStoryByStoryKey:function(cb){var db=this._getAllStories();for(var eb=0;eb<db.length;eb++){var fb=db[eb];if(fb.getAttribute('data-story-key')==cb)return fb;}return null;},removeStory:function(cb){this._removedStoryIDs[cb]=true;var db=this._getStoryByStoryKey(cb);if(!db)return;if(this._storiesWithActions)delete this._storiesWithActions[cb];if(db==this._activeStory)this._deactivateStory();var eb=this._getStoryDialog(db);eb&&eb.destroy();this._lastKStoriesRemove(db);var fb=db.getAttribute("data-dedupe-key");if(fb)delete this._dedupeKeys[fb];if(p.hasClass(db,'queuedStory')){q.remove(db);return;}this._animateStoryOut(db);},_isScrolledToTop:function(){return this._container.scrollTop<=this._scrollTopThreshold;},_flyStoryIn:function(cb){var db=q.create('div',{style:{marginTop:'-1000px'}},cb);ba.set(db,'opacity',0);q.prependContent(this._stories,db);var eb=ja.getElementDimensions(db).y;ba.set(db,'marginTop','-'+eb+'px');this._isInsertingStory=true;new i(db).to('marginTop',0).ease(i.ease.end).checkpoint(.5).to('opacity',1).ondone((function(){q.replace(db,cb);this._afterInsert(cb);this._isInsertingStory=false;}).bind(this)).go();},_fadeStoryIn:function(cb){new i(this._stories).to('opacity',.5).ondone((function(){q.prependContent(this._stories,cb);this._container.scrollTop=this._container.scrollTop+this._stories.firstChild.offsetHeight;this._scheduleScrollToTop();new i(this._stories).to('opacity',1).ondone((function(){this._afterInsert(cb);}).bind(this)).go();}).bind(this)).go();},_animateStoryOut:function(cb){var db=q.create('div',{style:{overflow:'hidden',position:'relative'}});q.insertBefore(cb,db);q.appendContent(db,cb);new i(db).to('top',20).to('height',0).to('opacity',0).ease(i.ease.end).ondone((function(){q.remove(db);j.inform('Ticker/animateOut');}).bind(this)).go();},_afterInsert:function(cb){j.inform('Ticker/afterInsert');},setPushChannel:function(cb){this._pushSubscription&&this._pushSubscription.unsubscribe();this._pushSubscription=j.subscribe(n.getArbiterType(cb),this._handleTickerPush.bind(this));e(['ChatConfig','ChannelConnection'],(function(db,eb){this._channelConnection=eb;this._checkChannelConnection();this._channelConnectionSubscription=this._channelConnection.subscribe([this._channelConnection.CONNECTED,this._channelConnection.RECONNECTING,this._channelConnection.SHUTDOWN,this._channelConnection.MUTE_WARNING,this._channelConnection.UNMUTE_WARNING],this._handleChannelConnection.bind(this));}).bind(this));},_checkChannelConnection:function(){p.conditionClass(this._root,'disconnected',this._channelConnection.disconnected());},_handleTickerPush:function(cb,db){var eb=db.obj;if(eb.delete_id){this._storiesToRemove.push(eb.delete_id);return;}var fb=eb.story_xhp;if(!fb)return;var gb=r(fb).getRootNode();if(!eb.story_time||eb.story_time==='0')throw new Error(ra('An invalid story time was pushed: %s, for ticker story: %s',typeof eb.story_time==='string'?'"'+eb.story_time+'"':eb.story_time,gb.getAttribute('data-flyoutdata')));this._newest=eb.story_time;this.queueStory(gb,eb.flyout_js_cmds);this._newestStory={actorID:eb.actor,storyKey:gb.getAttribute('data-story-key')};},_handleComposerPublish:function(cb,db){db.tickerMarkup&&this.insertStory(db.tickerMarkup);},_logRender:function(){if(this._loggedRender)return;var cb=this._tickerInSidebarMode;if(cb||w.byClass(this._content,'home_right_column')){new l('/ajax/log_ticker_render.php',{sidebar_mode:cb}).send();this._loggedRender=true;}},_isTickerVisible:function(){var cb=ca.getActiveInstance()==this;cb&&this._logRender();return cb;},_handleResponse:function(cb){var db=cb.getPayload();if(db.newest)this._newest=this._page_newest=db.newest;if(db.content)if(db.content instanceof Array){for(var eb=0;eb<db.content.length;eb++)this.queueStoryMarkup(db.content[eb]);}else this.queueStoryMarkup(db.content);},queueStoryMarkup:function(cb){var db=r(cb).getRootNode();this.queueStory(db);},dedupeStory:function(cb){var db=cb.getAttribute('data-story-key'),eb=db&&(!!this._objectIDs[db]||!!this._removedStoryIDs[db]);eb=eb||!!this._lastKStories.actors[cb.getAttribute('data-actor')]||!!this._lastKStories.apps[cb.getAttribute('data-app')];var fb=cb.getAttribute('data-dedupe-key');eb=eb||fb&&this._dedupeKeys[fb];if(cb.getAttribute('data-force-push'))eb=false;db&&(this._objectIDs[db]=true);return eb;},queueStory:function(cb,db){if(this.dedupeStory(cb))return;this._lastKStoriesInsert(cb);var eb=cb.getAttribute("data-dedupe-key");if(eb)this._dedupeKeys[eb]=true;p.addClass(cb,'queuedStory');q.appendContent(this._storyQueue,cb);var fb=db&&db.length;if(fb)db.forEach(function(hb){new Function(hb).apply();});cb.setAttribute('id',cb.id+'_'+this._root.id);var gb=this._getQueuedStories();gb.slice(0,-this._maxQueueLength).forEach(q.remove);if(fb)this._fetchedStories[cb.id]=true;},_cleanup:function(){ca.clearRHCplaceholder();if(!w.byClass(this._content,'hasRightCol'))return;this._objectIDs=[];this._subscriptions.forEach(j.unsubscribe);this._channelConnectionSubscription&&this._channelConnection.unsubscribe(this._channelConnectionSubscription);this._pushSubscription&&this._pushSubscription.unsubscribe();for(var cb in this._listeners)this._listeners[cb]&&this._listeners[cb].remove();clearTimeout(this._pollToken);this._pollToken=null;this._cleanupInputFocusListener();this._cleanupContentResizeListener();j.inform('Ticker/cleanup');},_onNavHandler:function(cb,db){var eb=db.params.key;if(eb!='lf'&&eb!='h')this._cleanup();},registerStoryDialog:function(cb,db){if(this._uaCurStoryIDFetch==cb.id)this._uaCurStoryIDFetch=null;if(this._uaCurStoryIDPrefetch==cb.id)this._uaCurStoryIDPrefetch=null;this._fetchedStories[cb.id]=true;this._fetchedStoriesDialog[cb.id]=db;db.setContext(cb);db.subscribe('hide',this._deactivateStory.bind(this,true));db.subscribe('success',this._focusStory.bind(this,cb));db.subscribe('beforehide',(function(){if(this._selecting){this._selecting=false;return false;}}).bind(this));if(this._popupOnHover){db.subscribe('mouseenter',this._clearHoverTimeouts.bind(this));db.subscribe('mouseleave',this._scheduleHide.bind(this));db.subscribe('show',(function(){wa(this._highlightDialogScrollbar.bind(this,db),0);var eb=h.listen(db.getContent(),'mousedown',(function(){this._selectStory(cb);eb.remove();}).bind(this));}).bind(this));}if(cb==this._activeStory)this._openDialog(db);},_highlightDialogScrollbar:function(cb){var db=q.scry(cb.getContent(),'.uiScrollableArea')[0];db&&z.poke(db);},_openStoryExternally:function(cb,event){var db=cb.getAttribute('data-href');if(!db||db=='#')return;var eb=cb.getAttribute('data-story-rel');switch(eb){case 'theater':this._deactivateAndClearStory();m.loadModules(["PhotoViewer"],function(hb){hb.bootstrap(db,cb);});return;case 'async':this._deactivateAndClearStory();k.bootstrap(db,cb);return;}var fb=cb.getAttribute('data-target'),gb=event.which!=1||event.getModifiers().any||fb=='_blank';gb?window.open(db,'_blank'):va(db);},_deactivateAndClearStory:function(){this._clearHoverTimeouts();this._deactivateStory();},_focusStoryWillTriggerScroll:function(cb){var db=this._container,eb=db.clientHeight,fb=cb.offsetHeight,gb=db.scrollTop,hb=gb+eb,ib=cb.offsetTop,jb=ib+fb;return ib<gb||jb>hb;},_focusStory:function(cb){if(this._focusStoryWillTriggerScroll(cb))this._preventScrollDismiss=true;var db=new x(cb),eb=w.byClass(cb,'scrollable'),fb=db.boundWithin(new x(eb)).getPositionVector(),gb=db.getPositionVector().sub(fb);if(gb.y!==0)gb.scrollElementBy(eb);cb.focus();},_selectStory:function(cb){this._selectedStory=cb;p.addClass(cb,'tickerStorySelected');p.addClass(this._root,'tickerChildSelected');},_activateStory:function(cb,db){this._clearHoverTimeouts();if(cb==this._activeStory||!this._storyCanOpenDialog(cb))return;this._deactivateStory();this._focusStory(cb);this._activeStory=cb;p.addClass(cb,'tickerStoryActive');window.Toggler&&ea.hide();if(this._logFlyouts){db=db||'unknown';new l('/ajax/feed/ticker/flyout.php',{src:db}).send();}da.log(cb);var eb=this._getStoryDialog(cb);if(eb){if(this._storyDialogResources[cb.id])m.loadResources(this._storyDialogResources[cb.id]);this._openDialog(eb);la.bumpEntityKey('ticker_stories','flyouts.open');return;}if(!(cb.id in this._fetchedStories))this._uaCurStoryIDFetch=cb.id;this._fetchStory(cb);},handleRemoveStory:function(){this._deactivateStory(true);},_deactivateStory:function(cb){if(this._activeStory===this._deactivatingStory)return;this._deactivatingStory=this._activeStory;if(this._dialog){if(cb){this._dialog.enableBehavior(t);}else this._dialog.disableBehavior(t);this._dialog.hide();}if(this._activeStory){p.removeClass(this._activeStory,'tickerStoryActive');p.removeClass(this._activeStory,'tickerStorySelected');p.removeClass(this._root,'tickerChildSelected');}this._dialog=this._selectedStory=this._activeStory=null;this._cleanupInputFocusListener();this._cleanupContentResizeListener();this._deactivatingStory=null;},_logUserAction:function(cb,db,event){ma(db,cb,event,'FORCE');},_fetchStory:function(cb){clearTimeout(this._fetchToken);var db=[],eb=this._getInsertedStories(),fb=eb.indexOf(cb);[-1,0,1].forEach(function(gb){var hb=eb[fb+gb];hb&&db.push(hb);},this);this._fetchToken=wa(this._fetchStories.bind(this,db),100);},_fetchStories:function(cb){var db=[],eb,fb=function(gb){clearTimeout(eb);cb.forEach(function(hb){p.conditionClass(hb,'tickerStoryFetching',gb);});};cb=cb.filter(function(gb){if(gb.id in this._fetchedStories)return false;this._fetchedStories[gb.id]=true;var hb=this._getStoryDialogParams(gb);if(!hb)return false;hb.uniq_id=gb.getAttribute('id');hb.referrer=this._tickerSource;db.push(hb);return true;},this);if(!db.length)return;eb=this._setTimeout(fb.bind(null,true),500);new k('/ajax/feed/ticker/multi_story').setInitialHandler(this._handleDialogResponse.bind(this,db)).setFinallyHandler(fb.bind(null,false)).setErrorHandler(sa).setData({stories:db}).setAllowCrossPageTransition(this._tickerInSidebarMode).send();},_handleDialogResponse:function(cb,db){if(db&&db.resource_map){var eb=[];for(var fb in db.resource_map){var gb=db.resource_map[fb];if(gb.type==='css'&&!gb.permanent)eb.push(fb);}if(eb.length>0)for(var hb=0;hb<cb.length;hb++)this._storyDialogResources[cb[hb].uniq_id]=eb;}},_tickerDeClicker:function(event){var cb=event.getTarget(),db=w.byTag(cb,'a'),eb=this._getStoryFromNode(cb),fb=this._getButtonFromNode(cb);if(eb&&db&&!fb&&p.hasClass(eb,'tickerStoryClickable')&&!p.hasClass(db,'tickerStoryAllowClick')&&!this._storyIsHidden(eb))db.setAttribute('rel','ignore');var gb=event.button==2,hb=event.type==='keydown',ib=eb&&this._getActionButtonFromStory(eb);if(!gb&&ib&&!hb)this._setClickedStory(eb);},_handleMouseup:function(event){this._clearClickedStory();},_setClickedStory:function(cb){this._clearClickedStory();p.addClass(cb,'tickerStoryClicked');this._clickedStory=cb;},_clearClickedStory:function(){if(this._clickedStory){p.removeClass(this._clickedStory,'tickerStoryClicked');this._clickedStory=null;}},_initInfiniteScrollListener:function(){var cb=this._getInsertedStories();if(this._storiesWithActions)for(var db=0;db<cb.length;db++){var eb=cb[db];if(p.hasClass(eb,'tickerStoryWithButton'))this._storiesWithActions[eb.getAttribute('data-story-key')]=eb;}var fb=Math.max(0,cb.length-this._autoloadStoryIndex);this._infiniteScrollStory=cb[fb];this._checkInfiniteScroll();},_checkInfiniteScroll:function(){if(this._infiniteScrollStory){var cb=ja.getElementPosition(this._infiniteScrollStory).y,db=ja.getElementPosition(this._container).y+ja.getElementDimensions(this._container).y;if(cb<db){var eb=q.scry(this._root,'.tickerMorePager a')[0];if(eb){var fb=w.byClass(eb,'stat_elem')||eb;new k(eb.getAttribute('ajaxify')).setReadOnly(true).setRelativeTo(eb).setStatusElement(fb).setAllowCrossPageTransition(true).send();}this._infiniteScrollStory=null;this._autoloadStoryIndex=5;}}},_setFixed:function(cb){if(!this._selectedStory)return;var db=this._getStoryDialog(this._selectedStory);if(db){db.setFixed&&db.setFixed(cb);db.updatePosition();}},_setTimeout:function(cb,db){return wa(cb,db,!this._tickerInSidebarMode);},_scrollDialogToBottom:function(){var cb=this._dialog&&this._dialog.getContent(),db=cb&&q.scry(cb,'.uiScrollableAreaWrap')[0],eb=db&&z.getInstance(db);eb&&eb.scrollToBottom();},_redrawFlyout:function(cb,db){if(this._hasUFIUpdated)return;var eb=this._dialog;if(eb&&eb.isShown()&&oa(eb.getContent(),db.form)){this._hasUFIUpdated=true;this._updateDialogPosition();}},_openDialog:function(cb){if(!this._tickerInSidebarMode)p.addClass(cb.getRoot(),'tickerStoryOverlayOnTop');this._hasUFIUpdated=false;var db=ka.getScrollPosition();this._dialog=cb.show();window.scrollTo(db.x,db.y);this._updateDialogPosition();this._writeSwfFrame(cb);wa(this._initCommentFocusListener.bind(this),0);wa(this._initContentResizeListener.bind(this),0);this._stupidIE7VideoResizeHack(cb);},_stupidIE7VideoResizeHack:function(cb){if(ia.ie()===7){var db=q.scry(cb.getContent(),'.uiVideoThumb .img');db.forEach(function(eb){ba.set(eb,'width','');});}},_updateDialogPosition:function(){var cb=this._tickerInSidebarMode||!!w.byClass(this._root,'fixed_elem');this._dialog.setFixed&&this._dialog.setFixed(cb);this._adjustFlyoutContentHeight();this._dialog.updatePosition();},_writeSwfFrame:function(cb){var db=this._dialog&&this._dialog.getContent(),eb=q.scry(db,'.swfObject')[0];if(!eb)return;var fb=eb.getAttribute('data-swfid');if(fb&&window[fb]){var gb=window[fb];gb.write(eb);}},_initCommentFocusListener:function(){var cb=this._dialog&&this._dialog.getContent(),db=cb&&q.scry(cb,'.tickerDialogFooter textarea')[0];if(!db)return;this._listeners.inputFocus=h.listen(db,'focus',this._scrollDialogToBottom.bind(this));},_cleanupInputFocusListener:function(){if(this._listeners.inputFocus){this._listeners.inputFocus.remove();this._listeners.inputFocus=null;}},_initContentResizeListener:function(){var cb=this._dialog&&this._dialog.getContent();if(!cb)return;this._listeners.contentResize=h.listen(cb,'click',(function(){wa(this._dialog.updatePosition.bind(this._dialog),0);}).bind(this));},_cleanupContentResizeListener:function(){if(this._listeners.contentResize){this._listeners.contentResize.remove();this._listeners.contentResize=null;}},_adjustFlyoutContentHeight:function(){var cb=this._dialog&&this._dialog.getContent(),db=cb&&q.scry(cb,'.uiScrollableAreaWrap')[0];if(!db)return;var eb=ja.getElementDimensions(db),fb=ja.getElementPosition(db),gb=q.scry(db,'.uiUfi .uiUfiComment'),hb=q.scry(db,"._12tg")[0],ib=q.scry(db,".UFILikeSentence")[0],jb=this.FLYOUT_MAX_HEIGHT;if(hb||ib){var kb=this._getUfiItemAndTop(hb,ib),lb=kb[0],mb=kb[1];jb=Math.max(jb,this.FLYOUT_TARGET_HEIGHT_OFFSET+db.scrollTop+mb+lb.offsetHeight-fb.y);}var nb=ja.getViewportDimensions().y-this.FLYOUT_VIEWPORT_PADDING;jb=Math.min(jb,nb);var ob=jb-this.FLYOUT_TARGET_HEIGHT_OFFSET;for(var pb=0;pb<gb.length;pb++){var qb=gb[pb],rb=ja.getElementPosition(qb),sb=rb.y-fb.y;if(Math.abs(sb-ob)<=this.FLYOUT_OFFSET_THRESHOLD){ob=sb+this.FLYOUT_COMMENT_OFFSET;break;}}if(eb.y>=ob){ba.set(db,'height',ob+'px');ba.set(db,'max-height',null);}else{ba.set(db,'max-height',jb+'px');ba.set(db,'height',null);}},_getUfiItemAndTop:function(cb,db){var eb=cb&&ja.getElementPosition(cb).y||0,fb=db&&ja.getElementPosition(db).y||0,gb=[cb,eb+this.FLYOUT_ACTION_FOOTER_PADDING],hb=[db,fb];return eb>fb?gb:hb;},_initObjectIDs:function(){var cb=this._getAllStories();for(var db=cb.length-1;db>=0;db--){var eb=cb[db].getAttribute('data-story-key');if(eb){this._objectIDs[eb]=true;this._lastKStoriesInsert(cb[db]);var fb=cb[db].getAttribute("data-dedupe-key");if(fb)this._dedupeKeys[fb]=true;}}},_handleChatOpened:function(){this._deactivateStory();},_handleChannelConnection:function(){this._checkChannelConnection();},getNewest:function(){return this._newest;}});f.exports=bb;},null);®)¯¸Ón      VÍLVÍL;²u—Wà©û   Ba,:https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/QJ2gI7jYOPI.js necko:classified 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAQAAgAAAAAAAAAAAAAAAAAAAAAB4vFIJp5wRkeyPxAQ9RJGKPqbqVvKO0mKuIl8ec8o/uhmCjImkVxP+7sgiYWmMt8F+O2DZM7ZTG6GukivU8OT5gAAAAAAAAXAMIIFvDCCBKSgAwIBAgIUPbXhC4Xsu7H3z2HTJ2qImwWmfEMwDQYJKoZIhvcNAQELBQAwgY0xCzAJBgNVBAYTAk5MMRIwEAYDVQQHEwlBbXN0ZXJkYW0xJTAjBgNVBAoTHFZlcml6b24gRW50ZXJwcmlzZSBTb2x1dGlvbnMxEzARBgNVBAsTCkN5YmVydHJ1c3QxLjAsBgNVBAMTJVZlcml6b24gQWthbWFpIFN1cmVTZXJ2ZXIgQ0EgRzE0LVNIQTIwHhcNMTUwODI3MTYxMDEyWhcNMTYwODI3MTYxMDExWjBtMQswCQYDVQQGEwJVUzELMAkGA1UECBMCTUExEjAQBgNVBAcTCUNhbWJyaWRnZTEhMB8GA1UEChMYQWthbWFpIFRlY2hub2xvZ2llcyBJbmMuMRowGAYDVQQDExFhMjQ4LmUuYWthbWFpLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMEsC1Bf+D5X49PrJxQQynzSoPaTqlm/R6G6xlDErWOJauViiexo6vmzahzzSlMEPVYpyT5oRd3SB4Qx7548TyiC90yse+aFur0qrNLeNMG7npVWA0up2v4a8msqYRACxoHcLolFXNFPNWtBTsRW42Ce+pg94pP4gWvBeFVclt3v9x2mr8RHafRNVLJvAJi+eg2mZlfeccqCWrIXKp/xZGUWBswTK+TFC2s1pJNxQkDMYpmLdgte0H0h4IRh8V7elj7TP/8Z8i0l4SxIHNbuqA8HvjBsundiNujlykBR9JSvX238ATPLOFrqkQQz6UAYHo2RRH7X72Uvbitu38jPYVcCAwEAAaOCAjEwggItMAwGA1UdEwEB/wQCMAAwTAYDVR0gBEUwQzBBBgkrBgEEAbE+ATIwNDAyBggrBgEFBQcCARYmaHR0cHM6Ly9zZWN1cmUub21uaXJvb3QuY29tL3JlcG9zaXRvcnkwga8GCCsGAQUFBwEBBIGiMIGfMC0GCCsGAQUFBzABhiFodHRwOi8vdmFzc2cxNDIub2NzcC5vbW5pcm9vdC5jb20wNgYIKwYBBQUHMAKGKmh0dHBzOi8vY2FjZXJ0LmEub21uaXJvb3QuY29tL3Zhc3NnMTQyLmNydDA2BggrBgEFBQcwAoYqaHR0cHM6Ly9jYWNlcnQuYS5vbW5pcm9vdC5jb20vdmFzc2cxNDIuZGVyMG4GA1UdEQRnMGWCEWEyNDguZS5ha2FtYWkubmV0gg4qLmFrYW1haWhkLm5ldIIWKi5ha2FtYWloZC1zdGFnaW5nLm5ldIIPKi5ha2FtYWl6ZWQubmV0ghcqLmFrYW1haXplZC1zdGFnaW5nLm5ldDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFPi9+q9zd8bHG/lLTRGn0TOvr3IRMD4GA1UdHwQ3MDUwM6AxoC+GLWh0dHA6Ly92YXNzZzE0Mi5jcmwub21uaXJvb3QuY29tL3Zhc3NnMTQyLmNybDAdBgNVHQ4EFgQUwHfR+EVeIyYOCfrHIM4gYFwsUd8wDQYJKoZIhvcNAQELBQADggEBALu54DWULbb7PuC5sYITWHJAFLikko7suU7mUu2a/QvS/GNNHfm4ny+on2w++/itYAKrsNMXkX1zglqtX6AACSUlgw7K6G7CoEVJXBntkBmt9wAJXroe2jMgWYvpbmYkcyaNRc4VvOK9FjvHslqXa5Y6NArfI5kRfdljblFQXR2sTYyYk0Dqqq8COCs62GhyLlP/oohQU0hA6EtomF5VFNlokO9qa+IAHrp2lR/+BLYcwPgOCxszCZikcmP5zyAnkte1Blh9kBQnKf6J6wTZsUUPcLktNr7FFqRIay8moKUuxYiSqlE4kSktcYqXy5cGrgYfwGYM93+0O3y8QZ30vLHALwADAAAAAAEBAAA= request-method GET response-head HTTP/1.1 200 OK
access-control-allow-origin: *
Cache-Control: public, max-age=29416855
Content-MD5: S7GUdUeoVMp/TVR0mNuIwQ==
Content-Type: application/x-javascript; charset=utf-8
Date: Thu, 15 Oct 2015 15:55:17 GMT
Expires: Tue, 20 Sep 2016 03:16:12 GMT
Last-Modified: Mon, 01 Jan 2001 08:00:00 GMT
Timing-Allow-Origin: *
x-content-type-options: nosniff
X-FB-Debug: 5nxP8L+4k0uaiHFkBmna5mnEiYm56pgn5Xy/jduyiun8hPjlgHljP81GMjsGldMr4nJJtGICRlasiLRw11agHw==
X-Firefox-Spdy: 3.1
 uncompressed-len 0   p