/*!CK:3967322740!*//*1444043675,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["8VSca"]); }

__d("TagExpansionButtonConfig",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FRIENDS_OF_TAGGED:"friends_of_tagged",TAGGED_ONLY:"tagged_only"};},null,{});
__d('ViewportTrackingHelper',['Event','DOMDimensions','Vector'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={getScrollListener:function(l){return h.listen(window,'scroll',l);},looseIsVisible:function(l,m){if(!l.x&&!l.y&&!l.width&&!l.height)return false;var n=j.getScrollPosition().y,o=i.getViewportDimensions().height,p=o+m-n;return l.y<p;},isVisible:function(l,m){if(!l.x&&!l.y&&!l.width&&!l.height)return false;var n=i.getViewportDimensions().height,o=Math.max(l.y,0),p=Math.min(l.y+l.height,n),q=Math.min(l.height,m);return p-o>=q;},isDescendantOf:function(l,m){if(l===m)return l;while(l&&l.parentNode){if(l.parentNode===m)return l;l=l.parentNode;}return false;}};f.exports=k;},null);
__d('ViewportTracking',['Arbiter','AsyncSignal','Banzai','BanzaiScuba','CSS','cx','CurrentUser','DOM','DOMDimensions','Event','LitestandMessages','NavigationMessage','Run','SubscriptionsHandler','UserActivity','Vector','ViewportTrackingHelper','clickRefAction','collectDataAttributes','debounce','getElementPosition','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){if(c.__markCompiled)c.__markCompiled();var da=97,ea=51,fa='vpv',ga='/feed/feed_tracking/vpv_waterfall_logging',ha=3,ia=2,ja=1,ka=0,la=1,ma=2,na=3,oa=4;function pa(){'use strict';}pa.prototype.init=function(qa){'use strict';this.useBanzai=true;this.viewportHeightRatio=qa.viewport_height_ratio?qa.viewport_height_ratio:.25;this.vpvDebug=!!qa.vpv_debug;this.vpvdDebug=!!qa.vpvd_debug;this.vpvdAnalysis=!!qa.vpvd_analysis;this.useWaterfallLogging=!!qa.waterfall_logging;this.loggedStoryIDs={};this.readStoryIDs={};this.annotatedStoryIDs={};this.minSizeToBeVisible=200;this.minFractionToBeVisibleForTimetracking=.5;this.scrollThrottlingInterval=100;this.mouseThrottlingInterval=100;this.keyboardThrottlingInterval=100;this.minTimeToReportImmediately=500;this.discardVPVDIntervalThreshold=90000;this.active_state_duration=1000;this.height_diff_to_change_state=25;this.focused_state_duration=3500;this.invalidateAllStoriesCache();this.cachedViewportHeight=p.getViewportDimensions().height;this.isTimetrackingEnabled=0;this.activeStories={};this.userInactiveLock=false;this.userActivityPollerTimeoutID=-1;this._headLoadStoryCount=0;this.getDataFromConfig(qa);if(this.isTimetrackingEnabled){this.lastMouseX=-1;this.lastMouseY=-1;this.lastStreamY=-1;this.latestStreamYChangedTimeStamp=-1;this.userFocus=ma;this.latestUserFocus=ma;this.latestUserActivity='init';this.focusedStory=null;this.latestFocusedStory=null;this.latestActiveStory=null;this.totalVPVDuration={};}this.isLoose=!!qa.is_loose;this.maxScrollPosition=0;if(qa.tracking_duration_config){this.scrollThrottlingInterval=qa.tracking_duration_config.scroll_throttling_interval;this.mouseThrottlingInterval=qa.tracking_duration_config.mouse_throttling_interval;this.keyboardThrottlingInterval=qa.tracking_duration_config.keyboard_throttling_interval;this.userActivityPollingInterval=qa.tracking_duration_config.user_activity_polling_interval;this.timeToBeConsideredInactive=qa.tracking_duration_config.time_to_be_considered_inactive;this.minFractionToBeVisibleForTimetracking=qa.tracking_duration_config.min_fraction_to_be_visible;this.minTimeToReportImmediately=qa.tracking_duration_config.min_time_to_report_immediately;this.active_state_duration=qa.tracking_duration_config.active_state_duration;this.height_diff_to_change_state=qa.tracking_duration_config.story_height_diff_to_change_state;this.focused_state_duration=qa.tracking_duration_config.focused_state_duration;this.discardVPVDIntervalThreshold=qa.tracking_duration_config.discard_vpvd_interval_threshold;}var ra,sa=aa(this.fireTimer,this.getTimeout(),this);if(this.isLoose){this.minSizeToBeVisible=0;ra=ca((function(){this.maxScrollPosition=Math.max(this.maxScrollPosition,w.getScrollPosition().y);sa();}).bind(this));}else ra=sa;this.initialStories=this.getStoriesInView();this.initialStoriesLogged=false;if(this.annotatedVPVLogging)this.initialStories.forEach(this.logAnnotatedVPV,this);if(this.useWaterfallLogging)this.getStoriesInView().forEach(function(wa){this.waterfallLogStep(wa,'100_all_stories_in_view_ignore_height',true);},this);this.vpvHeartBeatInterval=qa.vpv_heartbeat_interval;this.passVPVHeartbeatGK=qa.use_vpv_heartbeat;if(this.passVPVHeartbeatGK){this.intervalCount=1;this.fireTimerCount=1;this.storiesInView=this.initialStories?this.initialStories:this.getStoriesInView();this.vpvHeartBeatIntervalSignal=setInterval((function(){this._sendSignal('interval');}).bind(this),this.vpvHeartBeatInterval);}this.subscriptions=new u();this.subscriptions.addSubscriptions(this._getScrollListener(ra),q.listen(window,'resize',(function(){this.invalidateVisibleStoriesCache();this.cachedViewportHeight=p.getViewportDimensions().height;ra();}).bind(this)),q.listen(window,'focus',(function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'window_focus');}).bind(this)),q.listen(window,'blur',(function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(true,'window_blur');}).bind(this)),h.subscribe(s.NAVIGATION_BEGIN,this.cleanup.bind(this)),h.subscribe('Stream/totalHeadLoadedStories',(function(wa,xa){this._headLoadStoryCount=xa.count;}).bind(this)),h.subscribe(r.STORIES_INSERTED,(function(){if(!this.initialStoriesLogged){var wa=this.getStoriesInView();wa.forEach(this.logAnnotatedVPV,this);}else ra();if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'stories_inserted');}).bind(this)));if(this.isTimetrackingEnabled){this.updateTimeTrackingData(false,'init');var ta=ca((function(event){this.invalidateVisibleStoriesCache();this.handleScroll(event);}).bind(this),this.scrollThrottlingInterval),ua=ca((function(event){this.handleKeyboard(event);}).bind(this),this.keyboardThrottlingInterval),va=ca((function(event){this.handleMouse(event);}).bind(this),this.mouseThrottlingInterval);this.subscriptions.addSubscriptions(q.listen(window,'scroll',ta),q.listen(document.documentElement,'DOMMouseScroll',ta),q.listen(document.documentElement,'mousewheel',ta));this.subscriptions.addSubscriptions(q.listen(document.documentElement,'keydown',ua));this.subscriptions.addSubscriptions(q.listen(document.documentElement,'mouseover',va),q.listen(document.documentElement,'mousemove',va));this.subscriptions.addSubscriptions(h.subscribe('Event/stop',(function(wa,xa){this.handleMouse(xa.event);}).bind(this)));this.subscriptions.addSubscriptions(q.listen(document.documentElement,'click',(function(event){this.handleMouse(event);}).bind(this)),h.subscribe('PhotoSnowlift.OPEN',(function(){this.userFocus=na;this.handleLayers();}).bind(this)),h.subscribe('PhotoSnowlift.CLOSE',(function(){this.userFocus=la;this.focusedStory=null;this.updateTimeTrackingData(false,'snowlift_close');}).bind(this)));this._userActivityPoller();}t.onLeave(this.cleanup.bind(this));t.onUnload(this.cleanup.bind(this));};pa.prototype._getScrollListener=function(qa){'use strict';return q.listen(window,'scroll',qa);};pa.prototype.cleanup=function(){'use strict';if(this.subscriptions){this.subscriptions.release();this.subscriptions=null;}if(this.isTimetrackingEnabled){clearTimeout(this.userActivityPollerTimeoutID);this.updateTimeTrackingData(true,'cleanup');}if(this.passVPVHeartbeatGK)clearInterval(this.vpvHeartBeatIntervalSignal);if(this.annotatedVPVLogging){var qa=this.getStoriesInView();qa.forEach(this.logAnnotatedVPV,this);}this.initialStories=[];this._headLoadStoryCount=0;};pa.prototype.fireTimer=function(){'use strict';if(this.useWaterfallLogging){var qa=this.getStoriesInViewIgnoreHeight();qa.forEach(function(ra){this.waterfallLogStep(ra,'100_all_stories_in_view_ignore_height');},this);}if(!this.initialStoriesLogged){this.initialStories.forEach(this.markStoryRead,this);this.initialStoriesLogged=true;}this.storiesInView=this.getStoriesInView();this.storiesInView.forEach(this.markStoryRead,this);if(this.passVPVHeartbeatGK)this._sendSignal('fireTimer');};pa.prototype.heartBeatIsEnabled=function(){'use strict';return false;};pa.prototype.getSessionID=function(){'use strict';return null;};pa.prototype._sendSignal=function(qa){'use strict';if(!this.heartBeatIsEnabled())return;var ra=-1;if(qa=='interval'){ra=this.intervalCount++;}else if(qa=='fireTimer')ra=this.fireTimerCount++;var sa=-1,ta=-1,ua=-1;if(this.storiesInView.length>0){sa=this.getStoryID(this.storiesInView[0]);ta=this.getQueryID(this.storiesInView[0]);ua=this.getFBFeedLocations(this.storiesInView[0]);}var va=new k('vpv_heartbeat_js');va.addInteger('qid',ta);va.addInteger('uid',n.getID());va.addInteger('firststoryid',sa);va.addInteger('time',Math.round(Date.now()/1000));va.addNormal('type',qa);va.addInteger('count',ra);va.addInteger('fbfeed_location',ua);va.post();};pa.prototype._userActivityPoller=function(){'use strict';if(!this.userInactiveLock&&!v.isActive(this.timeToBeConsideredInactive)){this.userInactiveLock=true;this.userFocus=ma;this.updateTimeTrackingData(false,'user_activity_inactive');v.subscribeOnce((function(){this.userFocus=la;this.updateTimeTrackingData(false,'user_activity_active');this.userInactiveLock=false;}).bind(this));}this.userActivityPollerTimeoutID=setTimeout(this._userActivityPoller.bind(this),this.userActivityPollingInterval);};pa.prototype.getQueryID=function(qa){'use strict';return -1;};pa.prototype.getFBFeedLocations=function(qa){'use strict';return -1;};pa.prototype.getFBFeedInsertionPosition=function(qa){'use strict';return -1;};pa.prototype.createVPVDTimer=function(qa){'use strict';var ra=document.createElement("Label");ra.setAttribute("for",qa);ra.setAttribute("class",'vpvd_debug_timer');return ra;};pa.prototype.updateVPVDTimer=function(qa){'use strict';var ra=this.activeStories[qa].story,sa=o.scry(ra,'.vpvd_debug_timer');if(!sa.length){sa=[this.createVPVDTimer(ra),this.createVPVDTimer(ra)];var ta=o.scry(ra,'.UFIRow');if(ta.length&&ta[ta.length-1].clientWidth>0){ta[ta.length-1].appendChild(sa[0]);}else ra.appendChild(sa[0]);ra.insertBefore(sa[1],ra.firstChild);}var ua=this.totalVPVDuration[qa],va=Math.floor(ua/1000)+'.'+Math.floor(ua%1000/100);o.setContent(sa[0],va);o.setContent(sa[1],va);};pa.prototype.updateVPVDTimers=function(){'use strict';for(var qa in this.activeStories)if(this.activeStories.hasOwnProperty(qa))this.updateVPVDTimer(qa);};pa.prototype.logVpvdAnalysis=function(qa,ra,sa,ta,ua,va){'use strict';var wa=new k('vpv_duration');wa.addDenorm('qid',this.getQueryID(this.activeStories[qa].story));wa.addDenorm('uid',n.getID());wa.addDenorm('vsid',qa);wa.addInteger('time',Math.round(Date.now()/1000));wa.addInteger('duration',ta);wa.addInteger('total_duration',ua);wa.addNormal('story_state',this.activeStories[qa].state);wa.addNormal('is_active_state',sa);wa.addNormal('num_visible_stories',this.numVisibleStories);wa.addInteger('story_height',this.activeStories[qa].story_height);wa.addInteger('story_visible_height',this.activeStories[qa].height);wa.addInteger('state_visible_height',va);wa.addInteger('total_visible_height',this.totalVisibleHeight);wa.addInteger('total_height',this.totalHeight);wa.addNormal('user_focus',this.latestUserFocus);wa.addNormal('next_user_focus',this.userFocus);wa.addInteger('vpvd',ra);wa.addInteger('accumulated_vpvd',this.activeStories[qa].vpvd);wa.addNormal('user_activity',this.latestUserActivity);wa.addNormal('next_user_activity',this.userActivity);wa.addInteger('story_position_y',this.activeStories[qa].y);wa.addInteger('feed_insertion_position',this.getFBFeedInsertionPosition(this.activeStories[qa].story));wa.addNormal('visible_position',this.activeStories[qa].visible_position);wa.addNormal('is_focused_story',this.activeStories[qa].is_focused);wa.post();};pa.prototype.shouldDiscardStory=function(qa){'use strict';return this.activeStories[qa].height!=this.activeStories[qa].story_height&&this.activeStories[qa].height<this.totalHeight/2;};pa.prototype.calculateTotalHeight=function(){'use strict';this.totalHeight=0;for(var qa in this.activeStories)if(this.activeStories.hasOwnProperty(qa))this.totalHeight+=this.activeStories[qa].height;};pa.prototype.updateVPVDurations=function(qa){'use strict';if(this.latestUserFocus===ma||qa-this.latestTimeTrackingTimestamp>this.discardVPVDIntervalThreshold)return;var ra={1:0,2:0,3:0},sa=qa-this.latestTimeTrackingTimestamp>=this.focused_state_duration;this.totalVisibleHeight=0;for(var ta in this.activeStories)if(this.activeStories.hasOwnProperty(ta))if(!(this.latestUserFocus===la&&sa&&this.shouldDiscardStory(ta))){ra[this.activeStories[ta].state]+=this.activeStories[ta].height;this.totalVisibleHeight+=this.activeStories[ta].height;}var ua=0,va=qa-this.latestTimeTrackingTimestamp;if(this.latestUserFocus===la){va=ra[ha]>0?this.focused_state_duration:this.active_state_duration;va=Math.min(va,qa-this.latestTimeTrackingTimestamp);ua=qa-this.latestTimeTrackingTimestamp-va;}var wa=0,xa=ha;for(var ya=ha;ya>=ja;ya--)if(ra[ya]>0){wa=ra[ya];xa=ya;break;}var za=ra[ha]+ra[ia]+ra[ja],ab=0;for(ta in this.activeStories)if(this.activeStories.hasOwnProperty(ta)){if(this.latestUserFocus===la&&sa&&this.shouldDiscardStory(ta))continue;if(wa>0&&this.activeStories[ta].state>=xa){ab=va*(this.activeStories[ta].height/wa);if(this.vpvdAnalysis&&va>0)this.logVpvdAnalysis(ta,ab,true,va,va+ua,wa);this.activeStories[ta].vpvd+=ab;this.totalVPVDuration[ta]+=ab;}if(za>0){ab=ua*(this.activeStories[ta].height/za);if(this.vpvdAnalysis&&ua>0)this.logVpvdAnalysis(ta,ab,false,ua,va+ua,za);this.activeStories[ta].vpvd+=ab;this.totalVPVDuration[ta]+=ab;}}};pa.prototype.updateActiveStory=function(qa,ra,sa,ta){'use strict';this.activeStories[qa].state=ra;this.activeStories[qa].ts=sa;this.activeStories[qa].height_snapshot=ta[qa].height;this.activeStories[qa].is_focused=this.focusedStory===ta[qa].story;this.activeStories[qa].story_height=ta[qa].story_height;if(this.vpvdAnalysis){this.activeStories[qa].visible_position=ta[qa].visible_position;this.activeStories[qa].y=ta[qa].y;}};pa.prototype.updateActiveStories=function(qa,ra){'use strict';for(var sa in qa)if(qa.hasOwnProperty(sa))if(sa in this.activeStories){this.activeStories[sa].height=qa[sa].height;var ta=qa[sa].height-this.activeStories[sa].height_snapshot;if(this.focusedStory===qa[sa].story){this.updateActiveStory(sa,ha,ra,qa);}else if(ta<=-this.height_diff_to_change_state){this.updateActiveStory(sa,this.shouldDiscardStory(sa)?ka:ja,ra,qa);}else if(ta>=this.height_diff_to_change_state||this.activeStories[sa].is_focused||this.activeStories[sa].height===this.activeStories[sa].story_height)this.updateActiveStory(sa,ia,ra,qa);}else{this.activeStories[sa]={evp_ts:ra,story:qa[sa].story,height:qa[sa].height,vpvd:0};if(!this.totalVPVDuration[sa])this.totalVPVDuration[sa]=0;this.updateActiveStory(sa,ia,ra,qa);}};pa.prototype.recordVPVDurations=function(qa,ra){'use strict';for(var sa in this.activeStories)if(this.activeStories.hasOwnProperty(sa))if(ra||!(sa in qa)){if(this.activeStories[sa].vpvd>this.focused_state_duration||this.activeStories[sa].vpvd===this.totalVPVDuration[sa])this.recordTimeStoryWasInView(this.activeStories[sa]);delete this.activeStories[sa];}};pa.prototype.updateTimeTrackingData=function(qa,ra){'use strict';this.userActivity=ra;if(!this.activeStories)this.activeStories={};var sa=Date.now();if(!this.latestTimeTrackingTimestamp)this.latestTimeTrackingTimestamp=sa;var ta=this.getVisibleStoriesFromCache();this.calculateTotalHeight();this.updateVPVDurations(sa);this.updateActiveStories(ta,sa);if(this.vpvdDebug)this.updateVPVDTimers();this.recordVPVDurations(ta,qa);if(qa){this.latestTimeTrackingTimestamp=0;}else this.latestTimeTrackingTimestamp=sa;this.latestUserActivity=this.userActivity;this.latestUserFocus=this.userFocus;if(this.focusedStory)this.latestActiveStory=this.focusedStory;this.latestFocusedStory=this.focusedStory;this.focusedStory=null;};pa.prototype.needsToUpdateTimeTrackingData=function(){'use strict';return !(this.latestUserFocus===this.userFocus&&(this.userFocus===ma||this.userFocus===la&&!this.latestFocusedStory&&!this.focusedStory));};pa.prototype.getfocusedStory=function(qa){'use strict';var ra=this.getVisibleStoriesFromCache();for(var sa in ra)if(ra.hasOwnProperty(sa))if(x.isDescendantOf(qa,ra[sa].story))return ra[sa].story;return null;};pa.prototype.handleLayers=function(){'use strict';if(this.userFocus===na||this.userFocus===oa){this.focusedStory=this.latestActiveStory;this.updateTimeTrackingData(false,'media_layer');return true;}return false;};pa.prototype.didInteractWithStream=function(qa){'use strict';return x.isDescendantOf(qa,this.getStream())||x.isDescendantOf(this.getStream(),qa);};pa.prototype.handleScroll=function(event){'use strict';if(this.handleLayers())return;var qa=Date.now(),ra=ba(this.getStream()).y;if(ra!=this.lastStreamY||qa-this.latestStreamYChangedTimeStamp<2.5*this.scrollThrottlingInterval||this.didInteractWithStream(event.target)){this.latestStreamYChangedTimeStamp=qa;this.userFocus=la;}else this.userFocus=ma;this.lastStreamY=ra;if(this.userFocus===la||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'scroll');};pa.prototype.handleKeyboard=function(event){'use strict';if(this.handleLayers())return;if(this.didInteractWithStream(event.target)){this.userFocus=la;this.focusedStory=this.getfocusedStory(event.target);}else if(l.hasClass(event.target,'shareInput')){this.userFocus=la;this.focusedStory=this.latestActiveStory;}else this.userFocus=ma;if(this.userFocus===la||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'keyboard');};pa.prototype.handleMouse=function(event){'use strict';if(this.handleLayers())return;if(event.type!='click'&&event.clientX===this.lastMouseX&&event.clientY===this.lastMouseY)return;if(event.type==='click')this.invalidateVisibleStoriesCache();if(this.didInteractWithStream(event.target)){this.userFocus=la;this.focusedStory=this.getfocusedStory(event.target);}else this.userFocus=ma;this.lastMouseX=event.clientX;this.lastMouseY=event.clientY;if(this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,event.type);};pa.prototype.getStoriesInView=function(){'use strict';var qa=this.getAllStories(),ra=[],sa=false;for(var ta=0;ta<qa.length;ta++){var ua=qa[ta],va=this.getStoryID(ua);if(this.hasBeenVisible(va))continue;if(this.isVisible(ua)){if(ua.getAttribute('data-insertion-position')===null)ua.setAttribute('data-insertion-position',ta-this._headLoadStoryCount);ra.push(ua);sa=true;}else if(sa)break;}return ra;};pa.prototype.getStoriesInViewIgnoreHeight=function(){'use strict';var qa=this.getAllStories(),ra=false,sa=[];for(var ta=0;ta<qa.length;ta++){var ua=qa[ta];if(this.isVisible(ua,false,0)){sa.push(ua);ra=true;}else if(ra)break;}return sa;};pa.prototype.getAllStoriesFromCache=function(){'use strict';if(this.cachedAllStories===null)this.cachedAllStories=this.getAllStories();return this.cachedAllStories;};pa.prototype.invalidateAllStoriesCache=function(){'use strict';this.cachedAllStories=null;this.invalidateVisibleStoriesCache();};pa.prototype.getVisibleStoriesFromCache=function(){'use strict';if(this.cachedVisibleStories===null)this.cachedVisibleStories=this.getAllStoriesInView();return this.cachedVisibleStories;};pa.prototype.invalidateVisibleStoriesCache=function(){'use strict';this.cachedVisibleStories=null;};pa.prototype.getAllStoriesInView=function(){'use strict';var qa=this.getAllStoriesFromCache(),ra={},sa=false,ta=0,ua=qa.length,va=1,wa=qa.length;if(this._indexOfLastVisibleStoryOnPreviousPass>ua/2){ta=ua-1;ua=-1;va=-va;}for(var xa=ta;xa!=ua;xa+=va){var ya=qa[xa],za=this.getHeightIfVisible(ya,false,Math.min(this.minSizeToBeVisible,this.minFractionToBeVisibleForTimetracking*p.getElementDimensions(ya).height));if(za>0||ya===this.focusedStory){if(ya.getAttribute('data-insertion-position')===null)ya.setAttribute('data-insertion-position',xa-this._headLoadStoryCount);var ab=this.getStoryID(ya);ra[ab]={story:ya,height:za,story_height:p.getElementDimensions(ya).height};sa=true;if(this.vpvdAnalysis){ra[ab].y=ba(ya).y;ra[ab].visible_position=xa;wa=Math.min(wa,xa);}}else if(sa){this._indexOfLastVisibleStoryOnPreviousPass=xa-va;break;}}if(this.vpvdAnalysis){this.numVisibleStories=0;for(ab in ra)if(ra.hasOwnProperty(ab)){ra[ab].visible_position-=wa;this.numVisibleStories++;}}return ra;};pa.prototype.getTimetrackingDataToLog=function(qa){'use strict';var ra={evt:da,vpvd_start_timestamp:qa.evp_ts,vpvd_time_delta:Math.round(qa.vpvd),story_height:p.getElementDimensions(qa.story).height,viewport_height:this.cachedViewportHeight};return {ft:ra};};pa.prototype.recordTimeStoryWasInView=function(qa){'use strict';if(this.isTimetrackingEnabled&&qa.vpvd>0){var ra=this.getTimetrackingDataToLog(qa),sa=z(qa.story,['ft']);Object.assign(ra.ft,sa.ft);var ta=!!sa.ft.ei&&ra.ft.vpvd_time_delta>this.minTimeToReportImmediately;delete ra.ei;this.sendDataToLog(qa.story,ra,ta);}};pa.prototype.hasBeenVisible=function(qa){'use strict';return qa in this.readStoryIDs;};pa.prototype.isVisible=function(qa,ra,sa){'use strict';return this.getHeightIfVisible(qa,ra,sa)>0;};pa.prototype.getHeightIfVisible=function(qa,ra,sa){'use strict';if(ra===undefined)ra=this.isLoose;if(sa===undefined)sa=this.minSizeToBeVisible;var ta=w.getScrollPosition().y,ua=p.getViewportDimensions().height,va=ba(qa),wa=p.getElementDimensions(qa),xa=ua+this.maxScrollPosition-ta;if(!va.x&&!va.y&&!wa.x&&!wa.y)return false;if(ra&&va.y<xa)return true;var ya=Math.max(va.y,0),za=Math.min(va.y+wa.height,ua),ab=Math.min(wa.height,sa);return za-ya>=ab?za-ya:0;};pa.prototype.getHeightInViewport=function(qa){'use strict';var ra=p.getViewportDimensions().height,sa=ba(qa),ta=p.getElementDimensions(qa);if(!sa.x&&!sa.y&&!ta.x&&!ta.y)return false;var ua=Math.max(sa.y,0),va=Math.min(sa.y+ta.height,ra);return va-ua;};pa.prototype.sendDataToLog=function(qa,ra,sa){'use strict';if(this.useBanzai){var ta={};if(sa)ta.delay=3000;var ua=this.getSessionID();if(ua)ra.ft.session_id=ua;if(this.useWaterfallLogging&&ra.ft.evt==ea){ra.ft.should_waterfall_logging=1;ra.ft['interface']='www';var va=!this.initialStoriesLogged;this.waterfallLogStep(qa,'200_sent_to_banzai',va);}j.post('feed_tracking',ra,ta);}else y(fa,qa,null,'FORCE',ra);};pa.prototype.waterfallLogStep=function(qa,ra,sa){'use strict';var ta=this.getStoryID(qa);if(this.loggedStoryIDs[ra]&&this.loggedStoryIDs[ra][ta])return;var ua=this.getWaterfallData(qa,ra,sa);new i(ga,ua).send();if(!this.loggedStoryIDs[ra])this.loggedStoryIDs[ra]={};this.loggedStoryIDs[ra][ta]=true;};pa.prototype.getWaterfallData=function(qa,ra,sa){'use strict';var ta=this._getDataToLogImpl(qa),ua=z(qa,['ft']);Object.assign(ta.ft,ua.ft);var va=ta.ft;va.height_in_viewport=this.getHeightInViewport(qa);va.step=ra;va.is_initial_story=sa?1:0;va['interface']='www';return va;};pa.prototype.addSeenClassToStory=function(qa){'use strict';l.addClass(qa,"_50nb");l.removeClass(qa,"_50mx");l.removeClass(qa,"_2z-5");};pa.prototype.markStoryRead=function(qa){'use strict';var ra=this.getStoryID(qa);if(!ra||this.hasBeenVisible(ra))return;this.readStoryIDs[ra]=true;this.annotatedStoryIDs[ra]=true;var sa=this._getDataToLogImpl(qa),ta=z(qa,['ft']);Object.assign(sa.ft,ta.ft);delete sa.ei;this.sendDataToLog(qa,sa,false);l.addClass(qa,"_x72");if(this.vpvDebug)l.addClass(qa,"_5m7s");this.addSeenClassToStory(qa);};pa.prototype.logAnnotatedVPV=function(qa){'use strict';var ra=this.getStoryID(qa);if(!ra||ra in this.annotatedStoryIDs)return;this.annotatedStoryIDs[ra]=true;var sa=this._getDataToLogImpl(qa),ta=z(qa,['ft']);Object.assign(sa.ft,ta.ft);delete sa.ei;sa.ft.vpv_ft_only=1;this.sendDataToLog(qa,sa,false);};pa.prototype._getDataToLogImpl=function(qa){'use strict';var ra=this.getDataToLog(qa);if(!ra.ft)ra.ft={};return ra;};f.exports=pa;},null);
__d('PrivacySelectorOptionNew',['CSS','DOM','DOMQuery','JSXDOM','MenuSelectableItem','PrivacyConst','csx','cx','fbt','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s,t=m.EventExpansion;r=babelHelpers.inherits(u,l);s=r&&r.prototype;function u(v){'use strict';s.constructor.call(this,v);this.updateAfterTagExpansion(!!v.hasTags,v.eventExpansionType||t.NONE);}u.prototype._getData=function(){'use strict';return this._data;};u.prototype.getTooltip=function(){'use strict';return this._getData().tooltip;};u.prototype.getPostParam=function(){'use strict';return this._getData().postParam.toString();};u.prototype.getTriggerIcon=function(){'use strict';return this._getData().triggerIcon;};u.prototype.getTriggerLabel=function(){'use strict';return this._getData().triggerLabel;};u.prototype.isPublic=function(){'use strict';return this.getPostParam()===m.PostParam.EVERYONE;};u.prototype.isFriends=function(){'use strict';return this.getPostParam()===m.PostParam.FRIENDS;};u.prototype.isOnlyMe=function(){'use strict';return this.getPostParam()===m.PostParam.ONLY_ME;};u.prototype.isBasicOption=function(){'use strict';return true;};u.prototype.isCustomOption=function(){'use strict';return false;};u.prototype.getTagExpansionBehavior=function(){'use strict';return this._getData().tagExpansionBehavior;};u.prototype.getBaseValue=function(){'use strict';return this._getData().baseValue;};u.prototype.getIndex=function(){'use strict';return this._getData().value;};u.prototype.getLoggingEventName=function(){'use strict';switch(this.getPostParam()){case m.PostParam.FRIENDS:return 'click_friends';case m.PostParam.EVERYONE:return 'click_everyone';case m.PostParam.ONLY_ME:return 'click_only_me';case m.PostParam.FRIENDS_MINUS_ACQUAINTANCES:return 'click_friends_except_acquaintances';case m.PostParam.FB_ONLY:return 'click_fb_only';default:return 'click_other';}};u.prototype.updateAfterTagExpansion=function(v,w){'use strict';var x=w!=t.NONE,y=this._getData().triggerLabel;if((v||x)&&this._getData().showPlusOnTagExpansion)y=p._("{privacyLabel} (+)",[p.param('privacyLabel',this._getData().triggerLabel)]);this._setLabel(y);var z=this._getExpansionType(v,w),aa=this._getData().optionSubtitles||{};this._setSubtitle(aa[z]);};u.prototype.isBelowFold=function(){'use strict';var v=h.hasClass(this.getRoot(),"_3ey_");return v;};u.prototype._setLabel=function(v){'use strict';if(!v)return;var w=j.find(this.getRoot(),"._54nh");w&&i.setContent(w,v);this._getData().label=v;};u.prototype._setSubtitle=function(v){'use strict';if(!v)return;var w=j.find(this.getRoot(),"._48u1");w&&i.setContent(w,v);};u.prototype._getExpansionType=function(v,w){'use strict';switch(w){case t.NONE:return v?m.ExpansionType.TAGS_ONLY:m.ExpansionType.NONE;case t.EVENT_INVITEES:return v?m.ExpansionType.TAGS_AND_EVENT_INVITEES:m.ExpansionType.EVENT_INVITEES_ONLY;case t.EVENT_GROUP:return v?m.ExpansionType.TAGS_AND_EVENT_GROUP:m.ExpansionType.EVENT_GROUP_ONLY;default:q(0);}};u.prototype.render=function(){'use strict';var v=s.render.call(this);if(!this._getData().isPrimaryOption)return v;var w=j.find(v,"._54nc");w&&h.addClass(w,"_48t_");var x=i.find(v,"._54nh");x&&h.addClass(x,"_48u0");var y=k.div({className:"_48u1"},this._getData().optionSubtitle);i.appendContent(w,y);return v;};f.exports=u;},null);
__d("XPrivacySelectorLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/selector\/log\/",{event:{type:"Enum",required:true,enumType:1},render_location:{type:"Int",required:true},content_type:{type:"String",required:true}});},null,{});
__d('PrivacySelectorCustomOption',['AsyncDialog','AsyncRequest','DataStore','PrivacySelectorOptionNew','XPrivacySelectorLoggingController','XPrivacyCustomDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;n=babelHelpers.inherits(p,k);o=n&&n.prototype;function p(q){'use strict';o.constructor.call(this,q);}p.prototype.isBasicOption=function(){'use strict';return false;};p.prototype.isCustomOption=function(){'use strict';return true;};p.prototype.getSelector=function(){'use strict';return this._selector;};p.prototype.setPostParam=function(q){'use strict';this._data.postParam=q;};p.prototype.getLoggingEventName=function(){'use strict';return 'click_custom';};p.prototype.openDialog=function(q){'use strict';if(typeof this._selector==='undefined')this._selector=q;j.set(this._data.id,'PrivacySelectorCustomOption',this);var r=m.getURIBuilder().setString('option_id',this._data.id).setString('id',this._data.privacyfbid.toString()).setString('post_param',q.getPostParam()).setString('content_type',q.getContentType()).setInt('render_location',q.getRenderLocation()).setIntVector('tags',q.getTags()).setBool('autosave',this._data.autosave).setBool('limit_community',this._data.limitcommunity).setBool('limit_facebook',this._data.limitfacebook).setBool('limit_fof',this._data.limitfof).setBool('limit_tagexpand',this._data.limittagexpand).setBool('is_new_privacy_selector',true).setString('tag_expansion_button',q.getTagExpansionButton()).getURI(),s=new i(r);s.setRelativeTo(q.getTriggerButtonElement());h.send(s,function(t){var u=function(v){var w=l.getURIBuilder().setEnum('event',v).setInt('render_location',document.getElementsByName('render_location')[0].value).setString('content_type',document.getElementsByName('content_type')[0].value).getURI();new i().setURI(w).send();};t.subscribe('hide',function(){q.inform('custom/hide');q.inform('selectorFinished');});t.subscribe('success',function(){q.inform('custom/success');u('custom_save');});t.subscribe('cancel',function(){q.inform('custom/cancel');u('custom_cancel');});});};p.customPrivacySave=function(q,r){'use strict';var s=j.get(q,'PrivacySelectorCustomOption');s.getSelector().selectOption(r);j.remove(q,'PrivacySelectorCustomOption');};f.exports=p;},null);
__d('PrivacySelectableMenu',['Arbiter','AsyncRequest','CSS','Ease','PrivacySelectorCustomOption','PrivacySelectorOptionNew','SelectableMenu','SelectableMenuUtils','XPrivacySelectorLoggingController','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;r=babelHelpers.inherits(t,n);s=r&&r.prototype;function t(u,v){'use strict';s.constructor.call(this,u,v);}t.prototype.getItemForIndex=function(u){'use strict';for(var v=0;v<this._items.length;v++){var w=this._items[v];if(w instanceof m&&w.getIndex()==u)return w;}return null;};t.prototype.selectDefaultOption=function(){'use strict';this._items.some(function(u){if(u instanceof m&&this._isDefaultOption(u)){this.setValue(u.getIndex());return true;}return false;},this);};t.prototype.selectOption=function(u){'use strict';var v=null,w=this._items.some(function(x){if(x instanceof m&&!x.isCustomOption()&&x.getPostParam()==u){this.setValue(x.getIndex());return true;}if(x instanceof l){v=x;return false;}if(this._isMoreOption(x)){this.expandMenu();return false;}},this);if(!w&&v){v.setPostParam(u);this.setValue(v.getIndex());}};t.prototype._isDefaultOption=function(u){'use strict';return j.hasClass(u.getRoot(),"_plx");};t.prototype._isMoreOption=function(u){'use strict';return j.hasClass(u.getRoot(),"_po2");};t.prototype._handleItemClick=function(u,v){'use strict';if(!o.doesItemSupportSelect(u))return s._handleItemClick.call(this,u,v);if(this._isMoreOption(u)){this._logMoreClick();this.expandMenu();return;}this._logOptionClick(u);var w=this.inform('itemclick',{item:u,event:v});if(w)return;if(!o.isSelected(u)&&!u.isCustomOption()&&u.select()!==false){this._items.forEach(function(x){if(o.isSelected(x)&&x!==u)x.deselect();});this.inform('change',this.getSelection());}h.inform('composerprivacy/aborteducation');this.done();return u.handleClick();};t.prototype._logMoreClick=function(){'use strict';var u=p.getURIBuilder().setEnum('event','more_options').setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new i().setURI(u).send();};t.prototype._logOptionClick=function(u){'use strict';var v=p.getURIBuilder().setEnum('event',u.getLoggingEventName()).setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new i().setURI(v).send();};t.prototype.expandMenu=function(){'use strict';j.removeClass(this.getRoot(),"_po3");j.addClass(this.getRoot(),"_po4");this.inform('expandMenu');};t.prototype.collapseMenu=function(){'use strict';j.removeClass(this.getRoot(),"_po4");j.addClass(this.getRoot(),"_po3");};t.prototype.updateOptionsAfterTagExpansion=function(u,v){'use strict';this.forEachItem(function(w){if(w instanceof m)w.updateAfterTagExpansion(u,v);});};t.prototype.onPopoverOpen=function(u){'use strict';if(this._config.learnMore)this._config.learnMore.collapse();if(u&&u.isBelowFold()){this.expandMenu();}else this.collapseMenu();if(u&&this._items.indexOf(u)>=15)setTimeout((function(){this._scrollableArea.scrollToBottom(true,{duration:1000,ease:k.sineOut});}).bind(this),250);};f.exports=t;},null);
__d('PopoverButton',['DOM','DOMQuery','csx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={setLabel:function(l,m){var n=i.find(l,"._55pe"),o=n.childNodes;for(var p=0;p<o.length;p++)if(i.isTextNode(o[p])){h.replace(o[p],m);return;}h.appendContent(n,m);}};f.exports=k;},null);
__d('PrivacySelectorDataStore',['ArbiterMixin','PrivacySelectorNewDispatcher','KeyedCallbackManager'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=new j(),l=babelHelpers._extends({},h,{get:function(m,n){k.executeOrEnqueue(m,n);},hasValueChanged:function(m){return !!k.getResource(m);}});i.register(function(m){if(m.selector_type){var n={};n[m.selector_type]={post_param:m.post_param,unique_id:m.unique_id,reload:m.reload};k.addResourcesAndExecute(n);l.inform('change');}});f.exports=l;},null);
__d("XPrivacySelectorEventNUXController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/selector\/nux\/event_checkin\/",{context_node_id:{type:"String",required:true},event_expansion_type:{type:"Enum",enumType:0},event_id:{type:"String"}});},null,{});
__d("XPrivacySelectorUpdateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/selector\/update\/",{privacy_fbid:{type:"String",required:true},post_param:{type:"String",required:true},event_expansion_type:{type:"Enum",enumType:0},tags:{type:"IntVector"},render_location:{type:"Int",required:true},is_saved_on_select:{type:"Bool",defaultValue:false},should_return_tooltip:{type:"Bool",defaultValue:false},replace_on_select:{type:"Bool",defaultValue:false},prefix_tooltip_with_app_privacy:{type:"Bool",defaultValue:false},ent_id:{type:"String",required:true},tag_expansion_button:{type:"String"},reload_selector:{type:"Bool",defaultValue:false}});},null,{});
__d('PrivacySelectorBase',['ArbiterMixin','AsyncRequest','Animation','Button','CSS','CurrentUser','Focus','Input','MenuStaticItem','MenuSelectableItem','PopoverButton','PopoverLoadingMenu','PrivacyConst','DataStore','PrivacySelectorNewDispatcher','PrivacySelectorDataStore','PrivacySelectableMenu','Run','SubscriptionsHandler','TagExpansionButtonConfig','TooltipData','XPrivacySelectorEventNUXController','XPrivacySelectorLoggingController','XPrivacySelectorUpdateController','XUIError','bind','cx','fbt','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja){if(c.__markCompiled)c.__markCompiled();var ka,la,ma=t.EventExpansion,na=3;ka=babelHelpers.inherits(oa,ja(h));la=ka&&ka.prototype;function oa(pa,qa,ra,sa,ta,ua){'use strict';la.constructor.call(this);u.set(pa,'selector',this);this._root=pa;this._button=qa;this._config=ua;this._menu=ra;this._popoverMenu=ta;this._input=sa;this._isSavedOnSelect=ua.is_saved_on_select;this._privacyFBID=ua.privacy_fbid;this._contentType=ua.content_type;this._renderLocation=ua.render_location;this._supportsTagExpansion=ua.supports_tag_expansion;this._prefixTooltipApps=ua.should_prefix_tooltip_apps;this._shouldDisplayLabel=ua.should_display_label;this._tags=ua.tagged_uids;this._hasTags=this._tags.length>0;this._eventExpansionType=ua.event_expansion_type;this._entID=ua.ent_id;this._popover=this._popoverMenu.getPopover();this._receivingUpdate=false;this._initTagExpansionButtonState();this._selectorSyncKey=ua.selector_sync_key;this._previousParam=null;this._confirmOnSave=false;this._confirmOnSaveDialogs={};this._listeners=new z();if(ua.use_async_menu){this._listeners.addSubscriptions(this._popoverMenu.subscribe('setMenu',(function(){this._menu=this._popoverMenu.getMenu();if(!(this._menu instanceof x))return;this._onMenuLoad();this._onPopoverOpen();this.inform('asyncMenuLoaded');}).bind(this)));}else this._onMenuLoad();if(this._selectorSyncKey)this._initSelectorSync();y.onLeave(this._cleanup.bind(this));}oa.prototype._cleanup=function(){'use strict';this._listeners&&this._listeners.release();this._listeners=null;};oa.prototype._initSelectorSync=function(){'use strict';this._listeners.addSubscriptions(w.subscribe('change',(function(){w.get(this._selectorSyncKey,(function(pa){if(pa.unique_id!==this._menu._config.id){this._receivingUpdate=true;if(pa.post_param)this.selectOption(pa.post_param);pa.reload&&this.reloadSelector();}}).bind(this));}).bind(this)));if(!this._syncsToDefault())this._listeners.addSubscriptions(this._menu.subscribe('change',(function(){this._broadcastUpdate();}).bind(this)));};oa.prototype._broadcastUpdate=function(){'use strict';if(!this._receivingUpdate){var pa=this._getSelectedOption();v.handleUpdateFromSelector({selector_type:this._selectorSyncKey,post_param:pa.getPostParam().toString(),unique_id:this._menu._config.id});}else this._receivingUpdate=false;};oa.prototype.shouldReplaceOnPost=function(){'use strict';return this._config.replace_on_post||this.isComposerWithDefault();};oa.prototype.isComposerWithDefault=function(){'use strict';return this._syncsToDefault()&&!this._config.replace_on_select;};oa.prototype._isSelectorForChangingComposerDefault=function(){'use strict';return this._syncsToDefault&&this._config.replace_on_select;};oa.prototype._syncsToDefault=function(){'use strict';return this._config.selector_sync_key==t.PrivacyField.DEFAULT_COMPOSER.toString();};oa.prototype.getIsPublicSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isPublic();};oa.prototype.getIsFriendsSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isFriends();};oa.prototype.getIsOnlyMeSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isOnlyMe();};oa.prototype.getSelectedBaseValue=function(){'use strict';return this._selectedOption&&this._selectedOption.getBaseValue();};oa.prototype.getSelectedPostParam=function(){'use strict';return this._selectedOption&&this._selectedOption.getPostParam().toString();};oa.prototype.getIsCustomOptionSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isCustomOption();};oa.prototype.setValue=function(pa){'use strict';this._menu.setValue(pa);};oa.prototype.openSelectorExpanded=function(pa){'use strict';this.openSelector((function(){this._menu.expandMenu();pa&&pa();}).bind(this));};oa.prototype.openSelector=function(pa){'use strict';if(this._menu instanceof s){this.subscribeOnce('asyncMenuLoaded',(function(){pa&&pa();}).bind(this));this._popover.showLayer();}else{this._popover.showLayer();pa&&pa();}};oa.prototype.closeSelector=function(){'use strict';this._popover.hideLayer();};oa.prototype.getPopover=function(){'use strict';return this._popover;};oa.prototype.getTriggerButtonElement=function(){'use strict';return this._button;};oa.prototype.getRoot=function(){'use strict';return this._root;};oa.prototype.getMenuElement=function(){'use strict';return this._menu.getRoot();};oa.prototype.selectDefaultOption=function(){'use strict';this._menu.selectDefaultOption();this._updateMenu();};oa.prototype.selectOption=function(pa){'use strict';if(!pa)return;if(this._menu instanceof s){this.subscribeOnce('asyncMenuLoaded',this._selectOptionImpl.bind(this,pa));this._fetchAsyncMenu();}else this._selectOptionImpl(pa);};oa.prototype._selectOptionImpl=function(pa){'use strict';this._menu.selectOption(pa);this._updateMenu();};oa.prototype._updateMenu=function(){'use strict';this._selectedOption=this._getSelectedOption();this.updateDataForItemIndex(this._selectedOption.getIndex(),this._selectedOption.getPostParam().toString());};oa.prototype.setTagExpansionButton=function(pa){'use strict';this._tagExpansionButton=pa;if(this._hasAudienceExpansion()){this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion(),this._getEventExpansionType());this._updateTriggerButtonLabel();this._updateTooltipAfterChange();}};oa.prototype.getTagExpansionButton=function(){'use strict';return this._tagExpansionButton;};oa.prototype._initTagExpansionButtonState=function(){'use strict';this._tagExpansionButton=aa.FRIENDS_OF_TAGGED;var pa=this._getSelectedOption();if(!pa)return;var qa=JSON.parse(pa.getPostParam());if(qa.settings&&qa.settings.no_tag_expansion===true){this._tagExpansionButton=aa.TAGGED_ONLY;}else this._tagExpansionButton=aa.FRIENDS_OF_TAGGED;};oa.prototype._fetchAsyncMenu=function(){'use strict';if(this._config.use_async_menu)this._popoverMenu.fetchMenu();};oa.prototype._getSelectedOption=function(){'use strict';if(!(this._menu instanceof x))return;var pa;this._menu.forEachItem((function(qa){if(qa instanceof q&&qa.isSelected())pa=qa;}).bind(this));return pa;};oa.prototype._onItemClick=function(pa,qa){'use strict';var ra=qa.item;if(ra instanceof p)return;if(ra.isBasicOption()){this.updateDataForItemIndex(ra.getIndex(),ra.getPostParam().toString());}else if(ra.isCustomOption()){this._closeForCustom=true;ra.openDialog(this);}this.inform('click',{customSelected:ra.isCustomOption()});};oa.prototype.getContentType=function(){'use strict';return this._contentType;};oa.prototype.getRenderLocation=function(){'use strict';return this._renderLocation;};oa.prototype.getPostParam=function(){'use strict';return this._postParam;};oa.prototype.getTags=function(){'use strict';return this._tags;};oa.prototype.registerConfirmOnSaveDialog=function(pa,qa,ra){'use strict';this._confirmOnSave=true;if(!(pa in this._confirmOnSaveDialogs))this._confirmOnSaveDialogs[pa]={};ra.subscribe('hide',(function(){if(this._previousParam!==this._postParam)this.selectOption(this._previousParam);}).bind(this));ra.subscribe('button',(function(){this._savePrivacy();ra.hide();}).bind(this));this._confirmOnSaveDialogs[pa][qa]=ra;};oa.prototype.updateDataForItemIndex=function(pa,qa,ra){'use strict';if(ra){this._tagExpansionButton=ra;this.inform('CustomTagExpansion',this._tagExpansionButton);}var sa=this._menu.getItemForIndex(pa);if(sa.isCustomOption())sa.setPostParam(qa);this._selectedOption=sa;this._previousParam=this._postParam;this._postParam=qa;o.setValue(this._input,qa);this._updateTriggerButtonLabel();if(this._shouldUpdateTooltips()){this._updateTooltipAfterChange();}else{if(this._isSavedOnSelect)if(this._confirmOnSave&&this._previousParam in this._confirmOnSaveDialogs&&this._postParam in this._confirmOnSaveDialogs[this._previousParam]){this._confirmOnSaveDialogs[this._previousParam][this._postParam].show();}else this._savePrivacy();this._setTooltipValue(this._selectedOption.getTooltip());}this.inform('changed',{post_param:this._postParam,base_value:this.getSelectedBaseValue()});};oa.prototype._shouldUpdateTooltips=function(){'use strict';return this._prefixTooltipApps||this._supportsTagExpansion||this.getIsCustomOptionSelected();};oa.prototype._savePrivacy=function(){'use strict';this._previousParam=this._postParam;this._sendUpdateRequest();};oa.prototype.reloadSelector=function(){'use strict';this._cleanup();var pa=ea.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setInt('render_location',this._renderLocation).setBool('reload_selector',true).setString('ent_id',String(this._entID)).getURI();new i().setRelativeTo(this._root).setHandler(this.inform.bind(this,'reloaded')).setURI(pa).send();};oa.prototype._sendUpdateRequest=function(){'use strict';var pa=this._config.spinner&&this._config.checkmark&&this._config.error_icon;if(pa){k.setIcon(this._button,this._config.spinner);l.show(this._config.spinner);l.hide(this._config.checkmark);}var qa=ea.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setIntVector('tags',this._tags).setEnum('event_expansion_type',this._eventExpansionType).setInt('render_location',this._renderLocation).setBool('is_saved_on_select',this._isSavedOnSelect).setBool('should_return_tooltip',this._shouldUpdateTooltips()).setBool('prefix_tooltip_with_app_privacy',this._prefixTooltipApps).setBool('replace_on_select',this._config.replace_on_select).setString('ent_id',String(this._entID)).setString('tag_expansion_button',this._tagExpansionButton).getURI(),ra=new i().setRelativeTo(this._root).setHandler(ga(this,function(sa){if(pa){l.hide(this._config.spinner);this._updateTriggerButtonLabel();if(this._config.checkmark){this._updateTriggerButtonLabel();var ta=k.getIcon(this._button);l.hide(ta);new j(this._config.checkmark).show().from('opacity',0).to('opacity',1).duration(400).checkpoint().duration(200).checkpoint().from('opacity',1).to('opacity',0).duration(400).hide().ondone(function(){new j(ta).show().from('opacity',0).to('opacity',1).duration(300).go();}).go();}}if(this._config.replace_on_select)this._cleanup();if(this._isSelectorForChangingComposerDefault())this._broadcastUpdate();var ua=sa&&sa.payload&&sa.payload.tooltip;ua&&this._setTooltipValue(sa.payload.tooltip);this.inform('selector_updated');})).setURI(qa);if(pa)ra.setErrorHandler(ga(this,function(sa){this._menu.selectOption(this._previousParam);this._postParam=this._previousParam;r.setLabel(this._button,ia._("Publikum ausw\u00e4hlen"));k.setIcon(this._button,this._config.error_icon);l.show(this._config.error_icon);ba.remove(this._button);n.setWithoutOutline(this._button);fa.set({target:this._button,message:ia._("Your selection might not have been saved. We recommend trying again later.")});}));ra.send();};oa.prototype.informEventExpansionChanged=function(pa){'use strict';if(this._eventExpansionType===pa)return;this._eventExpansionType=pa;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion(),this._getEventExpansionType());this._updateTriggerButtonLabel();this._updateTooltipAfterChange();this._maybeShowEventExpansionNUX();};oa.prototype.informTagsChanged=function(pa){'use strict';var qa=this._getTags(pa);this.informTagsChangedWithIDs(qa);};oa.prototype.informTagsChangedWithIDs=function(pa){'use strict';var qa=!pa.length;if(this._hasTags===qa){this._hasTags=!!pa.length;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion(),this._getEventExpansionType());this._updateTriggerButtonLabel();}if(this._tags.length!==pa.length){this._tags=pa;this._updateTooltipAfterChange();}};oa.prototype._getEventExpansionType=function(){'use strict';return this._eventExpansionType;};oa.prototype._showTagExpansion=function(){'use strict';return this._hasTags&&this._tagExpansionButton.valueOf()===aa.FRIENDS_OF_TAGGED.valueOf();};oa.prototype._getTags=function(pa){'use strict';var qa=[],ra=m.getID();if(pa.withTags)for(var sa=0;sa<pa.withTags.length;sa++){var ta=pa.withTags[sa].info;if(ta.uid!=ra)qa.push(ta.uid);}if(pa.mention)for(var ua in pa.mention)if(pa.mention[ua].type=='user'&&pa.mention[ua].uid!=ra)qa.push(pa.mention[ua].uid);return qa;};oa.prototype._updateTriggerButtonLabel=function(){'use strict';var pa=this._selectedOption.getTriggerIcon();if(this._config.trigger_no_icon)l.hide(pa);k.setIcon(this._button,pa.cloneNode());if(!this._shouldDisplayLabel)return;r.setLabel(this._button,this._selectedOption.getLabel());if(this._config.trigger_style===na){l.conditionClass(this.getTriggerButtonElement(),"_mw-",this.getIsOnlyMeSelected());l.conditionClass(this.getTriggerButtonElement(),"_mw_",this.getIsPublicSelected());}};oa.prototype._updateTooltipAfterChange=function(){'use strict';var pa=ia._("Wird geladen ...");this._setTooltipValue(pa);this._sendUpdateRequest();};oa.prototype._setTooltipValue=function(pa){'use strict';pa&&ba.set(this._button,pa);};oa.prototype._onPopoverClose=function(){'use strict';if(!this._getSelectedOption())return;if(this._closeForCustom){this._closeForCustom=false;}else this.inform('selectorFinished');this.inform('close');};oa.prototype._onPopoverOpen=function(){'use strict';if(!(this._menu instanceof x))return;this._menu.onPopoverOpen(this._getSelectedOption());var pa=da.getURIBuilder().setEnum('event','opened').setInt('render_location',this._renderLocation).setString('content_type',this._contentType).getURI();new i().setURI(pa).send();this.inform('open');};oa.prototype._onMenuLoad=function(){'use strict';this._listeners.addSubscriptions(this._menu.subscribe('itemclick',this._onItemClick.bind(this)),this._popover.subscribe('hide',this._onPopoverClose.bind(this)),this._popover.subscribe('show',this._onPopoverOpen.bind(this)));this._listeners.addSubscriptions(this._menu.subscribe('expandMenu',(function(){if(this._popover&&this._popover.getLayer())this._popover.getLayer().updatePosition();}).bind(this)));this._selectedOption=this._getSelectedOption();if(this._selectedOption){this._postParam=this._selectedOption.getPostParam().toString();this._previousParam=this._postParam;this._hasAudienceExpansion()&&this._updateTriggerButtonLabel();}};oa.prototype._hasAudienceExpansion=function(){'use strict';return this._hasTags||this._getEventExpansionType()!=ma.NONE;};oa.prototype._maybeShowEventExpansionNUX=function(){'use strict';if(this._getEventExpansionType()==ma.NONE)return;var pa=ca.getURIBuilder().setString('context_node_id',this._button.id).setEnum('event_expansion_type',this._getEventExpansionType()).getURI();new i(pa).send();};f.exports=oa;},null);ãÏr)¡      VÍKVÍK;²u’Wó   Ba,:https://fbstatic-a.akamaihd.net/rsrc.php/v2/yv/r/Qq5rVyTmMRE.js necko:classified 1 security-info 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 request-method GET response-head HTTP/1.1 200 OK
access-control-allow-origin: *
Cache-Control: public, max-age=30655149
Content-MD5: eeZYpAtChuki2Qt4VxMPLw==
Content-Type: application/x-javascript; charset=utf-8
Date: Thu, 15 Oct 2015 15:55:15 GMT
Expires: Tue, 04 Oct 2016 11:14:24 GMT
Last-Modified: Mon, 01 Jan 2001 08:00:00 GMT
Timing-Allow-Origin: *
x-content-type-options: nosniff
X-FB-Debug: m2IiCUPz0aVkml1ixpPtzxvYan+4z9nrTnIdvZgdBOdm7K7K3RuO98VYX8jXdIMab45r2q7pZsX6/gsrqNQiLw==
X-Firefox-Spdy: 3.1
 uncompressed-len 0   Ã#